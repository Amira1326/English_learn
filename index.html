<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The world's most beautiful English learning platform with British pronunciation, gamified learning & emotional engagement">
    <title>✨ English Master Pro | Magical Learning Experience</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Playfair+Display:wght@700;800;900&family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Magical Color System */
            --primary-50: #f0f2ff;
            --primary-100: #e0e4ff;
            --primary-200: #c7ceff;
            --primary-300: #a3b1ff;
            --primary-400: #8596ff;
            --primary-500: #6366f1;
            --primary-600: #4f46e5;
            --primary-700: #4338ca;
            --primary-800: #3730a3;
            --primary-900: #312e81;
            
            --magic-blue: #4338ca;
            --magic-purple: #7e3af2;
            --magic-pink: #d946ef;
            --magic-gold: #f59e0b;
            --magic-emerald: #10b981;
            --magic-sky: #0ea5e9;
            
            --success-500: #10b981;
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
            
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            --text-primary: var(--gray-900);
            --text-secondary: var(--gray-600);
            --bg-surface: var(--gray-50);
            --bg-elevated: white;
            --border-color: var(--gray-200);
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 30px 60px rgba(0, 0, 0, 0.15);
            --shadow-glow: 0 0 25px rgba(99, 102, 241, 0.35);
            
            --radius-sm: 12px;
            --radius-md: 20px;
            --radius-lg: 28px;
            --radius-xl: 36px;
            --radius-2xl: 44px;
            --radius-full: 9999px;
            
            --transition-fast: 0.2s;
            --transition-normal: 0.4s;
            --transition-slow: 0.6s;
            
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-7: 1.75rem;
            --space-8: 2rem;
            --space-9: 2.25rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            --space-24: 6rem;
            
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;
            --text-5xl: 3rem;
            --text-6xl: 3.75rem;
            --text-7xl: 4.5rem;
            --text-8xl: 6rem;
            --text-9xl: 8rem;
            
            --font-sans: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-serif: 'Playfair Display', Georgia, serif;
            --font-display: 'Quicksand', 'Manrope', sans-serif;
        }

        .dark {
            --text-primary: var(--gray-50);
            --text-secondary: var(--gray-300);
            --bg-surface: var(--gray-900);
            --bg-elevated: var(--gray-800);
            --border-color: var(--gray-700);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.25);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.35);
            --shadow-xl: 0 30px 60px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-family: var(--font-sans);
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-primary);
            scroll-padding-top: 4rem;
            overflow-x: hidden;
        }

        body {
            min-height: 100vh;
            background-attachment: fixed;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 10% 20%, rgba(99, 102, 241, 0.08) 0%, transparent 25%),
                        radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 25%),
                        radial-gradient(circle at 50% 50%, rgba(236, 72, 153, 0.05) 0%, transparent 35%);
            z-index: -2;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            position: relative;
            z-index: 10;
        }

        /* Magical Header with Floating Elements */
        header {
            text-align: center;
            padding: var(--space-16) var(--space-6) var(--space-12);
            position: relative;
            overflow: hidden;
            margin-bottom: var(--space-12);
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
            animation: rotate 25s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .floating {
            position: absolute;
            animation: float 6s ease-in-out infinite;
            z-index: -1;
            opacity: 0.8;
        }

        .floating-1 {
            top: 15%;
            left: 10%;
            font-size: 3rem;
            animation-delay: 0s;
        }

        .floating-2 {
            top: 25%;
            right: 15%;
            font-size: 2.5rem;
            animation-delay: -2s;
        }

        .floating-3 {
            bottom: 20%;
            left: 20%;
            font-size: 2rem;
            animation-delay: -4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .british-flag {
            font-size: 4rem;
            margin-bottom: var(--space-4);
            animation: pulse 2s infinite;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        h1 {
            font-family: var(--font-display);
            font-size: var(--text-7xl);
            font-weight: 900;
            background: linear-gradient(110deg, #fff, #e0e7ff, #c7d2fe, #a5b4fc, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-4);
            letter-spacing: -0.03em;
            text-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 5px;
            background: linear-gradient(90deg, transparent, var(--primary-400), transparent);
            border-radius: var(--radius-full);
        }

        .tagline {
            font-size: var(--text-2xl);
            color: rgba(255, 255, 255, 0.92);
            max-width: 700px;
            margin: 0 auto var(--space-8);
            line-height: 1.65;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-12);
            margin-top: var(--space-8);
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: center;
            min-width: 140px;
        }

        .hero-stat-number {
            font-family: var(--font-display);
            font-size: var(--text-6xl);
            font-weight: 800;
            background: linear-gradient(110deg, var(--primary-300), var(--primary-500), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            text-shadow: 0 0 25px rgba(99, 102, 241, 0.4);
        }

        .hero-stat-label {
            font-size: var(--text-xl);
            color: rgba(255, 255, 255, 0.85);
            font-weight: 500;
            margin-top: var(--space-2);
        }

        /* Profile & XP System */
        .profile-section {
            background: linear-gradient(140deg, rgba(67, 56, 202, 0.92), rgba(126, 58, 242, 0.92));
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            margin-bottom: var(--space-12);
            box-shadow: var(--shadow-xl), var(--shadow-glow);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--space-8);
        }

        .profile-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            z-index: -1;
        }

        .profile-left {
            display: flex;
            align-items: center;
            gap: var(--space-6);
            flex-wrap: wrap;
        }

        .profile-avatar {
            width: 90px;
            height: 90px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary-400), var(--magic-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.8rem;
            color: white;
            font-weight: 800;
            box-shadow: 0 10px 30px rgba(67, 56, 202, 0.5);
            position: relative;
            overflow: hidden;
        }

        .profile-avatar::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            animation: rotate 8s linear infinite;
            opacity: 0.7;
        }

        .profile-info {
            color: white;
        }

        .profile-name {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            margin-bottom: var(--space-1);
            background: linear-gradient(to right, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .profile-goal {
            font-size: var(--text-lg);
            opacity: 0.9;
            max-width: 400px;
            line-height: 1.6;
        }

        .xp-container {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-xl);
            padding: var(--space-5) var(--space-6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-width: 280px;
        }

        .xp-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3);
        }

        .xp-title {
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--text-lg);
        }

        .xp-level {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: var(--space-1) var(--space-4);
            border-radius: var(--radius-full);
            font-weight: 700;
            font-size: var(--text-lg);
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        .xp-bar-container {
            height: 14px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-full);
            overflow: hidden;
            position: relative;
            margin-bottom: var(--space-2);
            border: 1px solid rgba(255, 255, 255, 0.25);
        }

        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-400), var(--magic-purple), var(--magic-pink));
            border-radius: var(--radius-full);
            width: 68%;
            position: relative;
            overflow: hidden;
            transition: width var(--transition-slow) cubic-bezier(0.4, 0, 0.2, 1);
        }

        .xp-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .xp-text {
            font-size: var(--text-sm);
            color: rgba(255, 255, 255, 0.85);
            text-align: center;
            font-weight: 500;
        }

        /* Stats Dashboard - Magical Cards */
        .stats-section {
            margin-bottom: var(--space-16);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: var(--space-10);
            flex-wrap: wrap;
            gap: var(--space-4);
        }

        .section-title {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            position: relative;
            display: inline-block;
            background: linear-gradient(110deg, var(--gray-900), var(--primary-700));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 75px;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-500), var(--magic-purple));
            border-radius: var(--radius-full);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: var(--space-6);
        }

        .stat-card {
            background: var(--bg-elevated);
            border-radius: var(--radius-xl);
            padding: var(--space-7) var(--space-6);
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-500), var(--magic-purple));
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl), 0 0 25px rgba(99, 102, 241, 0.25);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .stat-icon-container {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--space-6);
            border-radius: var(--radius-2xl);
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(99, 102, 241, 0.08);
            position: relative;
            overflow: hidden;
        }

        .stat-icon-container::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.2) 0%, transparent 70%);
            animation: rotate 15s linear infinite;
            opacity: 0.6;
        }

        .stat-icon {
            font-size: 2.4rem;
            background: linear-gradient(110deg, var(--primary-600), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-number {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            background: linear-gradient(110deg, var(--gray-900), var(--primary-700));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: var(--space-2);
        }

        .stat-label {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Categories - Magical Garden */
        .categories-section {
            margin-bottom: var(--space-16);
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-8);
        }

        .category-card {
            background: var(--bg-elevated);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: all var(--transition-slow);
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            cursor: pointer;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.03), transparent);
            opacity: 0;
            transition: opacity var(--transition-normal);
            z-index: 1;
        }

        .category-card:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: var(--shadow-xl), 0 0 35px rgba(99, 102, 241, 0.35);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .category-card:hover::before {
            opacity: 1;
        }

        .category-header {
            padding: var(--space-8) var(--space-6) var(--space-6);
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .category-icon {
            font-size: 4.5rem;
            margin-bottom: var(--space-5);
            background: linear-gradient(135deg, var(--primary-500), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: transform var(--transition-normal);
            display: inline-block;
        }

        .category-card:hover .category-icon {
            transform: scale(1.15) rotate(8deg);
            filter: drop-shadow(0 0 15px rgba(99, 102, 241, 0.6));
        }

        .category-title {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            margin-bottom: var(--space-3);
            background: linear-gradient(110deg, var(--gray-900), var(--primary-700));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .category-desc {
            color: var(--text-secondary);
            font-size: var(--text-lg);
            line-height: 1.65;
            max-height: 60px;
            overflow: hidden;
            position: relative;
        }

        .category-desc::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to top, var(--bg-elevated), transparent);
        }

        .category-footer {
            padding: var(--space-6);
            border-top: 1px solid var(--border-color);
            background: var(--bg-surface);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            z-index: 2;
            position: relative;
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-4);
        }

        .category-stat {
            text-align: center;
        }

        .category-stat-value {
            font-family: var(--font-display);
            font-weight: 800;
            font-size: var(--text-3xl);
            background: linear-gradient(110deg, var(--primary-600), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .category-stat-label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-top: var(--space-1);
        }

        .category-progress {
            height: 8px;
            background: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-top: var(--space-4);
            position: relative;
        }

        .category-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-500), var(--magic-purple));
            border-radius: var(--radius-full);
            width: 0%;
            transition: width var(--transition-slow) cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .category-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shine 2.5s infinite;
        }

        /* Add Category - Magical Portal */
        .add-category-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
            border: 3px dashed rgba(99, 102, 241, 0.4);
            border-radius: var(--radius-2xl);
            padding: var(--space-12) var(--space-8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-6);
            cursor: pointer;
            transition: all var(--transition-normal);
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .add-category-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
            animation: rotate 18s linear infinite;
            z-index: -1;
        }

        .add-category-card:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
            transform: scale(1.04);
            border-color: var(--magic-pink);
            box-shadow: 0 20px 50px rgba(236, 72, 153, 0.35);
        }

        .add-icon {
            font-size: 5rem;
            animation: bounce 2.2s infinite;
            background: linear-gradient(135deg, var(--primary-400), var(--magic-purple), var(--magic-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        .add-icon::after {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.8), transparent);
            border-radius: var(--radius-full);
            animation: rotate 4s linear infinite;
            z-index: -1;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-25px) scale(1.15); }
        }

        .add-category-card h3 {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            background: linear-gradient(to right, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-2);
        }

        .add-category-card p {
            color: rgba(255, 255, 255, 0.85);
            font-size: var(--text-xl);
            max-width: 400px;
            line-height: 1.6;
        }

        /* Words Section - Enchanted Library */
        .words-section {
            background: var(--bg-elevated);
            border-radius: var(--radius-2xl);
            padding: var(--space-10) var(--space-8);
            box-shadow: var(--shadow-xl);
            display: none;
            animation: slide-up 0.6s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            margin-bottom: var(--space-16);
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .words-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--primary-500), var(--magic-purple), var(--magic-pink));
        }

        .words-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-10);
            flex-wrap: wrap;
            gap: var(--space-6);
        }

        .words-title {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: var(--space-4);
            background: linear-gradient(110deg, var(--gray-900), var(--primary-700));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .words-title i {
            font-size: var(--text-4xl);
            background: linear-gradient(135deg, var(--primary-500), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .words-actions {
            display: flex;
            gap: var(--space-4);
            flex-wrap: wrap;
        }

        .btn {
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-xl);
            font-weight: 700;
            font-size: var(--text-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-3);
            border: none;
            position: relative;
            overflow: hidden;
            min-width: 180px;
            box-shadow: var(--shadow-md);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-500), var(--magic-purple), var(--magic-pink));
            opacity: 0;
            transition: opacity var(--transition-fast);
            z-index: -1;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl), 0 0 25px rgba(99, 102, 241, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-600), var(--magic-purple));
            color: white;
        }

        .btn-secondary {
            background: white;
            color: var(--primary-700);
            border: 2px solid var(--primary-300);
        }

        .btn-secondary:hover {
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--magic-gold), #d97706);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--magic-emerald), #047857);
            color: white;
        }

        .words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: var(--space-8);
        }

        .word-card {
            background: var(--bg-surface);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            border: 2px solid transparent;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .word-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), transparent);
            opacity: 0;
            transition: opacity var(--transition-normal);
            z-index: -1;
        }

        .word-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(99, 102, 241, 0.25);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .word-card:hover::before {
            opacity: 1;
        }

        .word-card.mastered {
            border-color: rgba(16, 185, 129, 0.4);
            background: rgba(16, 185, 129, 0.03);
        }

        .word-card.mastered::before {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), transparent);
            opacity: 0.8;
        }

        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-5);
        }

        .english-word {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            background: linear-gradient(110deg, var(--primary-700), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.15;
        }

        .word-difficulty {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            font-weight: 800;
            font-size: var(--text-base);
            font-family: var(--font-display);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .difficulty-easy {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success-500);
        }

        .difficulty-medium {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning-500);
        }

        .difficulty-hard {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger-500);
        }

        .arabic-word {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            font-size: var(--text-2xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-5);
            direction: rtl;
            text-align: right;
            line-height: 1.5;
        }

        .pronunciation {
            font-family: 'Lucida Console', Monaco, monospace;
            font-size: var(--text-xl);
            color: var(--text-secondary);
            margin-bottom: var(--space-6);
            font-style: italic;
            letter-spacing: 0.5px;
            background: rgba(99, 102, 241, 0.04);
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-lg);
            display: inline-block;
        }

        .word-example {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            font-style: italic;
            padding: var(--space-5);
            background: rgba(67, 56, 202, 0.03);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-7);
            position: relative;
            border-left: 4px solid var(--primary-400);
            line-height: 1.7;
        }

        .word-example::before {
            content: '"';
            position: absolute;
            top: -18px;
            left: 8px;
            font-size: 4.5rem;
            color: var(--primary-300);
            opacity: 0.35;
            font-family: Georgia, serif;
            line-height: 1;
        }

        .word-actions {
            display: flex;
            justify-content: center;
            gap: var(--space-4);
        }

        .word-btn {
            width: 64px;
            height: 64px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: all var(--transition-normal);
            font-size: var(--text-2xl);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .word-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .word-btn:hover::before {
            opacity: 1;
        }

        .word-btn:hover {
            transform: scale(1.15) rotate(8deg);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
        }

        .word-btn:active {
            transform: scale(0.95);
        }

        .word-btn.speak {
            background: linear-gradient(135deg, var(--primary-600), var(--magic-purple));
            color: white;
        }

        .word-btn.learn {
            background: linear-gradient(135deg, var(--magic-emerald), #047857);
            color: white;
        }

        .word-btn.quiz {
            background: linear-gradient(135deg, var(--magic-gold), #d97706);
            color: white;
        }

        /* Quiz Section - Crystal Caves */
        .quiz-section {
            background: linear-gradient(140deg, rgba(67, 56, 202, 0.04), rgba(126, 58, 242, 0.04));
            border-radius: var(--radius-2xl);
            padding: var(--space-10) var(--space-8);
            box-shadow: var(--shadow-xl);
            display: none;
            animation: slide-up 0.6s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            margin-bottom: var(--space-16);
        }

        .quiz-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--magic-gold), var(--magic-pink));
        }

        .quiz-header {
            text-align: center;
            margin-bottom: var(--space-10);
        }

        .quiz-title {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            margin-bottom: var(--space-4);
            background: linear-gradient(110deg, var(--magic-gold), var(--magic-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 5px 25px rgba(245, 158, 11, 0.3);
        }

        .quiz-subtitle {
            color: var(--text-secondary);
            font-size: var(--text-2xl);
            max-width: 700px;
            margin: 0 auto var(--space-8);
            line-height: 1.65;
        }

        .quiz-progress-container {
            max-width: 650px;
            margin: var(--space-8) auto;
        }

        .quiz-progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-3);
            font-size: var(--text-lg);
            color: var(--text-secondary);
            font-weight: 600;
        }

        .quiz-progress-bar-container {
            height: 14px;
            background: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            position: relative;
        }

        .quiz-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--magic-gold), var(--magic-pink));
            border-radius: var(--radius-full);
            width: 30%;
            transition: width var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .quiz-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shine 2.2s infinite;
        }

        .quiz-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .quiz-question-container {
            background: var(--bg-elevated);
            border-radius: var(--radius-2xl);
            padding: var(--space-10);
            margin-bottom: var(--space-10);
            border: 1px solid var(--border-color);
            text-align: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .quiz-question-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--primary-400), var(--magic-purple));
        }

        .quiz-question {
            font-family: var(--font-serif);
            font-size: var(--text-4xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-8);
            line-height: 1.45;
            position: relative;
            padding: 0 var(--space-4);
        }

        .quiz-question::after {
            content: '?';
            position: absolute;
            right: -25px;
            top: -15px;
            font-family: var(--font-display);
            font-size: 8rem;
            color: var(--primary-200);
            opacity: 0.6;
            line-height: 1;
            transform: rotate(15deg);
            z-index: -1;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: var(--space-5);
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-option {
            background: var(--bg-surface);
            border: 3px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-6) var(--space-5);
            cursor: pointer;
            transition: all var(--transition-normal);
            text-align: center;
            font-size: var(--text-2xl);
            font-weight: 700;
            position: relative;
            overflow: hidden;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .quiz-option:hover {
            border-color: var(--primary-400);
            transform: translateY(-3px);
            background: rgba(99, 102, 241, 0.03);
        }

        .quiz-option.selected {
            border-color: var(--primary-500);
            background: rgba(99, 102, 241, 0.08);
            transform: scale(1.03);
        }

        .quiz-option.correct {
            border-color: var(--success-500);
            background: rgba(16, 185, 129, 0.12);
            position: relative;
        }

        .quiz-option.correct::after {
            content: '✓';
            position: absolute;
            top: -15px;
            right: -15px;
            font-size: 3rem;
            color: var(--success-500);
            opacity: 0.8;
            font-weight: 800;
            font-family: var(--font-display);
        }

        .quiz-option.incorrect {
            border-color: var(--danger-500);
            background: rgba(239, 68, 68, 0.12);
            position: relative;
        }

        .quiz-option.incorrect::after {
            content: '✗';
            position: absolute;
            top: -15px;
            right: -15px;
            font-size: 3rem;
            color: var(--danger-500);
            opacity: 0.8;
            font-weight: 800;
            font-family: var(--font-display);
        }

        .quiz-feedback {
            padding: var(--space-6) var(--space-8);
            border-radius: var(--radius-xl);
            margin: var(--space-8) 0;
            text-align: center;
            font-weight: 700;
            font-size: var(--text-2xl);
            display: none;
            position: relative;
            overflow: hidden;
        }

        .quiz-feedback::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            animation: shine 3s infinite;
            opacity: 0.7;
        }

        .feedback-correct {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success-700);
            border: 2px solid var(--success-300);
        }

        .feedback-incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger-700);
            border: 2px solid var(--danger-300);
        }

        .quiz-controls {
            display: flex;
            justify-content: center;
            gap: var(--space-5);
            margin-top: var(--space-8);
            flex-wrap: wrap;
        }

        .quiz-result {
            text-align: center;
            padding: var(--space-10) var(--space-6);
            display: none;
        }

        .result-score {
            font-family: var(--font-display);
            font-size: var(--text-8xl);
            font-weight: 800;
            background: linear-gradient(110deg, var(--magic-gold), var(--magic-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: var(--space-6);
            text-shadow: 0 10px 40px rgba(245, 158, 11, 0.4);
            position: relative;
        }

        .result-score::after {
            content: '%';
            position: absolute;
            right: -40px;
            bottom: -20px;
            font-size: 3rem;
            opacity: 0.6;
            color: var(--magic-gold);
        }

        .result-message {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            margin-bottom: var(--space-8);
            background: linear-gradient(110deg, var(--primary-600), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 5px 25px rgba(99, 102, 241, 0.3);
        }

        .result-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-10);
            margin: var(--space-10) 0;
            flex-wrap: wrap;
        }

        .result-stat {
            text-align: center;
            min-width: 160px;
        }

        .result-stat-value {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            background: linear-gradient(110deg, var(--primary-600), var(--magic-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-3);
        }

        .result-stat-label {
            font-size: var(--text-xl);
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* Achievements - Treasure Vault */
        .achievements-section {
            margin-bottom: var(--space-16);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-6);
            justify-content: center;
        }

        .achievement-card {
            background: var(--bg-elevated);
            border-radius: var(--radius-xl);
            padding: var(--space-7) var(--space-4);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .achievement-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: var(--shadow-xl), 0 0 30px rgba(99, 102, 241, 0.3);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .achievement-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), transparent);
            opacity: 0;
            transition: opacity var(--transition-normal);
            z-index: -1;
        }

        .achievement-card:hover::before {
            opacity: 1;
        }

        .achievement-icon {
            font-size: var(--text-5xl);
            margin-bottom: var(--space-4);
            transition: transform var(--transition-normal);
            position: relative;
        }

        .achievement-card:hover .achievement-icon {
            transform: scale(1.3) rotate(15deg);
            filter: drop-shadow(0 0 15px rgba(99, 102, 241, 0.6));
        }

        .achievement-locked .achievement-icon {
            color: var(--gray-400);
            opacity: 0.7;
        }

        .achievement-unlocked .achievement-icon {
            background: linear-gradient(135deg, var(--primary-500), var(--magic-purple), var(--magic-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 12px rgba(99, 102, 241, 0.5));
        }

        .achievement-title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: var(--text-lg);
            margin-bottom: var(--space-2);
            min-height: var(--space-7);
            color: var(--text-primary);
        }

        .achievement-requirement {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .achievement-locked .achievement-requirement {
            color: var(--gray-400);
        }

        .achievement-progress {
            height: 6px;
            background: var(--gray-200);
            border-radius: var(--radius-full);
            margin-top: var(--space-3);
            overflow: hidden;
        }

        .achievement-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-500), var(--magic-purple));
            border-radius: var(--radius-full);
            transition: width var(--transition-normal);
        }

        /* Footer - Enchanted Forest */
        footer {
            background: linear-gradient(140deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.95));
            border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
            padding: var(--space-12) var(--space-6) var(--space-8);
            margin-top: var(--space-12);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(99, 102, 241, 0.08) 0%, transparent 35%),
                        radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.08) 0%, transparent 35%);
            z-index: 0;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-10);
            position: relative;
            z-index: 1;
        }

        .footer-column h3 {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            margin-bottom: var(--space-6);
            position: relative;
            padding-bottom: var(--space-3);
            color: white;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-400), var(--magic-purple));
            border-radius: var(--radius-full);
        }

        .footer-links {
            list-style: none;
        }

        .footer-link {
            display: block;
            padding: var(--space-2) 0;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all var(--transition-fast);
            font-size: var(--text-lg);
            position: relative;
            padding-left: 20px;
        }

        .footer-link::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--primary-400);
            font-weight: bold;
            font-size: var(--text-xl);
            top: 2px;
        }

        .footer-link:hover {
            color: white;
            transform: translateX(4px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: var(--space-8);
            margin-top: var(--space-8);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: var(--text-lg);
            position: relative;
            z-index: 1;
        }

        .footer-logo {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            background: linear-gradient(110deg, #fff, var(--primary-300));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-5);
            display: inline-block;
            letter-spacing: -0.5px;
        }

        .footer-tagline {
            color: rgba(255, 255, 255, 0.85);
            font-size: var(--text-xl);
            max-width: 700px;
            margin: 0 auto var(--space-8);
            line-height: 1.7;
            font-style: italic;
        }

        /* Confetti Animation */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background-color: var(--primary-500);
            top: -20px;
            animation: confetti-fall 5s forwards;
            z-index: 1000;
            border-radius: 2px;
            opacity: 0.95;
            transform-origin: center;
        }

        @keyframes confetti-fall {
            0% {
                transform: translate(0, -100vh) rotate(0deg) scale(1);
                opacity: 1;
            }
            25% {
                transform: translate(50px, -75vh) rotate(90deg) scale(1.1);
                opacity: 0.9;
            }
            50% {
                transform: translate(-30px, -50vh) rotate(180deg) scale(0.9);
                opacity: 0.8;
            }
            75% {
                transform: translate(20px, -25vh) rotate(270deg) scale(1.05);
                opacity: 0.7;
            }
            100% {
                transform: translate(-10px, 0) rotate(360deg) scale(1);
                opacity: 0;
            }
        }

        /* Responsive Design */
        @media (max-width: 1100px) {
            :root {
                --space-16: 3.5rem;
                --space-12: 2.75rem;
                --space-10: 2.25rem;
                --space-8: 1.75rem;
                --space-6: 1.4rem;
            }
            
            h1 {
                font-size: var(--text-6xl);
            }
            
            .hero-stat-number {
                font-size: var(--text-5xl);
            }
            
            .profile-section {
                padding: var(--space-7);
            }
            
            .profile-avatar {
                width: 80px;
                height: 80px;
                font-size: 2.5rem;
            }
            
            .profile-name {
                font-size: var(--text-2xl);
            }
            
            .section-title {
                font-size: var(--text-4xl);
            }
            
            .stat-number {
                font-size: var(--text-4xl);
            }
            
            .category-title {
                font-size: var(--text-2xl);
            }
            
            .words-title {
                font-size: var(--text-4xl);
            }
            
            .english-word {
                font-size: var(--text-3xl);
            }
            
            .arabic-word {
                font-size: var(--text-xl);
            }
            
            .quiz-question {
                font-size: var(--text-3xl);
            }
            
            .quiz-option {
                font-size: var(--text-xl);
                padding: var(--space-5) var(--space-4);
            }
            
            .result-score {
                font-size: var(--text-7xl);
            }
            
            .result-message {
                font-size: var(--text-3xl);
            }
        }

        @media (max-width: 768px) {
            :root {
                --space-16: 3rem;
                --space-12: 2.5rem;
                --space-10: 2rem;
                --space-8: 1.6rem;
                --space-6: 1.3rem;
                --space-5: 1.15rem;
                --space-4: 1rem;
            }
            
            html {
                font-size: 15px;
            }
            
            header {
                padding: var(--space-12) var(--space-4) var(--space-10);
            }
            
            .british-flag {
                font-size: 3.2rem;
            }
            
            h1 {
                font-size: var(--text-5xl);
            }
            
            .tagline {
                font-size: var(--text-xl);
                padding: 0 var(--space-4);
            }
            
            .hero-stats {
                gap: var(--space-8);
            }
            
            .hero-stat-number {
                font-size: var(--text-4xl);
            }
            
            .hero-stat-label {
                font-size: var(--text-lg);
            }
            
            .profile-section {
                flex-direction: column;
                text-align: center;
                padding: var(--space-7) var(--space-5);
            }
            
            .profile-left {
                flex-direction: column;
                gap: var(--space-5);
            }
            
            .profile-avatar {
                width: 75px;
                height: 75px;
                font-size: 2.3rem;
            }
            
            .profile-name {
                font-size: var(--text-xl);
            }
            
            .profile-goal {
                font-size: var(--text-base);
            }
            
            .xp-container {
                min-width: 100%;
            }
            
            .section-title {
                font-size: var(--text-3xl);
            }
            
            .section-title::after {
                width: 60px;
            }
            
            .stat-number {
                font-size: var(--text-3xl);
            }
            
            .stat-label {
                font-size: var(--text-base);
            }
            
            .categories-grid {
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            }
            
            .category-icon {
                font-size: 3.8rem;
            }
            
            .category-title {
                font-size: var(--text-xl);
            }
            
            .words-section,
            .quiz-section {
                padding: var(--space-8) var(--space-5);
            }
            
            .words-title {
                font-size: var(--text-3xl);
            }
            
            .btn {
                min-width: 150px;
                padding: var(--space-3) var(--space-6);
                font-size: var(--text-base);
            }
            
            .words-grid,
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .english-word {
                font-size: var(--text-2xl);
            }
            
            .arabic-word {
                font-size: var(--text-lg);
            }
            
            .pronunciation {
                font-size: var(--text-lg);
            }
            
            .word-example {
                font-size: var(--text-base);
                padding: var(--space-4);
            }
            
            .word-btn {
                width: 56px;
                height: 56px;
                font-size: var(--text-xl);
            }
            
            .quiz-question {
                font-size: var(--text-2xl);
            }
            
            .quiz-option {
                min-height: 90px;
                font-size: var(--text-lg);
                padding: var(--space-4);
            }
            
            .result-score {
                font-size: var(--text-6xl);
            }
            
            .result-message {
                font-size: var(--text-2xl);
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .footer-link::before {
                display: none;
            }
            
            .footer-link {
                padding-left: 0;
            }
        }

        @media (max-width: 480px) {
            :root {
                --space-16: 2.5rem;
                --space-12: 2.25rem;
                --space-10: 1.8rem;
                --space-8: 1.4rem;
                --space-6: 1.2rem;
                --space-5: 1rem;
                --space-4: 0.9rem;
            }
            
            html {
                font-size: 14px;
            }
            
            header {
                padding: var(--space-10) var(--space-3) var(--space-8);
            }
            
            .british-flag {
                font-size: 2.8rem;
            }
            
            h1 {
                font-size: var(--text-4xl);
                letter-spacing: -0.02em;
            }
            
            h1::after {
                bottom: -10px;
                width: 80px;
            }
            
            .tagline {
                font-size: var(--text-lg);
            }
            
            .hero-stat-number {
                font-size: var(--text-3xl);
            }
            
            .hero-stat-label {
                font-size: var(--text-base);
            }
            
            .profile-avatar {
                width: 68px;
                height: 68px;
                font-size: 2rem;
            }
            
            .profile-name {
                font-size: var(--text-lg);
            }
            
            .xp-title {
                font-size: var(--text-base);
            }
            
            .xp-level {
                font-size: var(--text-base);
                padding: var(--space-1) var(--space-3);
            }
            
            .stat-card {
                padding: var(--space-6) var(--space-5);
            }
            
            .stat-icon-container {
                width: 70px;
                height: 70px;
            }
            
            .stat-icon {
                font-size: 2.1rem;
            }
            
            .stat-number {
                font-size: var(--text-3xl);
            }
            
            .category-card {
                border-radius: var(--radius-xl);
            }
            
            .category-header {
                padding: var(--space-6) var(--space-4) var(--space-5);
            }
            
            .category-icon {
                font-size: 3.2rem;
                margin-bottom: var(--space-4);
            }
            
            .category-title {
                font-size: var(--text-lg);
                margin-bottom: var(--space-2);
            }
            
            .category-desc {
                font-size: var(--text-base);
                max-height: 50px;
            }
            
            .words-section,
            .quiz-section {
                padding: var(--space-7) var(--space-4);
                border-radius: var(--radius-xl);
            }
            
            .words-title {
                font-size: var(--text-2xl);
            }
            
            .words-title i {
                font-size: var(--text-2xl);
            }
            
            .btn {
                min-width: 140px;
                padding: var(--space-3) var(--space-5);
                font-size: var(--text-sm);
                gap: var(--space-2);
            }
            
            .english-word {
                font-size: var(--text-xl);
            }
            
            .arabic-word {
                font-size: var(--text-lg);
            }
            
            .pronunciation {
                font-size: var(--text-base);
                padding: var(--space-2) var(--space-3);
            }
            
            .word-example {
                font-size: var(--text-sm);
                padding: var(--space-3);
            }
            
            .word-example::before {
                font-size: 3.5rem;
                top: -15px;
            }
            
            .word-btn {
                width: 50px;
                height: 50px;
                font-size: var(--text-lg);
            }
            
            .quiz-title {
                font-size: var(--text-3xl);
            }
            
            .quiz-subtitle {
                font-size: var(--text-lg);
            }
            
            .quiz-question {
                font-size: var(--text-xl);
                padding: 0;
            }
            
            .quiz-question::after {
                font-size: 6rem;
                right: -20px;
                top: -12px;
            }
            
            .quiz-option {
                min-height: 80px;
                font-size: var(--text-base);
                padding: var(--space-3);
            }
            
            .quiz-feedback {
                font-size: var(--text-xl);
                padding: var(--space-5) var(--space-6);
            }
            
            .result-score {
                font-size: var(--text-5xl);
            }
            
            .result-score::after {
                font-size: 2.5rem;
                right: -30px;
                bottom: -15px;
            }
            
            .result-message {
                font-size: var(--text-xl);
            }
            
            .result-stat-value {
                font-size: var(--text-4xl);
            }
            
            .footer-logo {
                font-size: var(--text-3xl);
            }
            
            .footer-tagline {
                font-size: var(--text-base);
                padding: 0 var(--space-3);
            }
            
            .footer-bottom {
                font-size: var(--text-base);
            }
            
            .floating {
                display: none;
            }
        }

        /* Animations for Engagement */
        @keyframes level-up {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.8); opacity: 0.9; }
            100% { transform: scale(1); opacity: 1; }
        }

        .level-up-animation {
            animation: level-up 1s ease-out;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.4); }
        }

        .celebrate {
            animation: celebrate 0.5s ease;
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .floating {
                animation: none !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        :focus-visible {
            outline: 3px solid var(--primary-500);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Magical floating elements -->
    <div class="floating floating-1">✨</div>
    <div class="floating floating-2">🇬🇧</div>
    <div class="floating floating-3">📚</div>
    
    <!-- Confetti container -->
    <div class="confetti-container" id="confetti-container"></div>

    <!-- Header - Magical Entrance -->
    <header>
        <div class="container">
            <div class="british-flag">🇬🇧</div>
            <h1>English Master Pro</h1>
            <p class="tagline">The world's most beautiful & effective platform for mastering British English vocabulary with authentic pronunciation</p>
            
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-number" id="hero-total-words">350+</div>
                    <div class="hero-stat-label">Words to Master</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number" id="hero-categories">10</div>
                    <div class="hero-stat-label">Magical Categories</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number">🎯</div>
                    <div class="hero-stat-label">Smart Quizzes</div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Profile & XP System -->
        <section class="profile-section">
            <div class="profile-left">
                <div class="profile-avatar">🌟</div>
                <div class="profile-info">
                    <h2 class="profile-name" id="user-name">Language Explorer</h2>
                    <p class="profile-goal">✨ On a magical journey to master British English for IELTS success</p>
                </div>
            </div>
            <div class="xp-container">
                <div class="xp-header">
                    <span class="xp-title">
                        <i class="fas fa-star"></i> Experience Points
                    </span>
                    <span class="xp-level">
                        <i class="fas fa-crown"></i> Level 7
                    </span>
                </div>
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xp-bar" style="width: 68%;"></div>
                </div>
                <div class="xp-text" id="xp-text">680 / 1000 XP</div>
            </div>
        </section>

        <!-- Stats Dashboard -->
        <section class="stats-section">
            <div class="section-header">
                <h2 class="section-title">✨ Your Learning Journey</h2>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon-container">
                        <div class="stat-icon">📚</div>
                    </div>
                    <div class="stat-number" id="total-words">142</div>
                    <div class="stat-label">Total Words</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon-container">
                        <div class="stat-icon">✅</div>
                    </div>
                    <div class="stat-number" id="mastered-words">48</div>
                    <div class="stat-label">Mastered</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon-container">
                        <div class="stat-icon">🔥</div>
                    </div>
                    <div class="stat-number" id="streak-days">7</div>
                    <div class="stat-label">Day Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon-container">
                        <div class="stat-icon">⭐</div>
                    </div>
                    <div class="stat-number" id="total-xp">2,480</div>
                    <div class="stat-label">Total XP</div>
                </div>
            </div>
        </section>

        <!-- Categories Section - Magical Garden -->
        <section class="categories-section" id="categories-section">
            <div class="section-header">
                <h2 class="section-title">🌿 Magical Learning Gardens</h2>
            </div>
            
            <div class="categories-grid" id="categories-grid">
                <!-- Categories will be populated by JavaScript -->
            </div>

            <!-- Add Category - Magical Portal -->
            <div class="add-category-card" id="add-category-card">
                <div class="add-icon">
                    <i class="fas fa-plus-circle"></i>
                </div>
                <h3>Create Your Own Garden</h3>
                <p>Design a personalized category with your favorite vocabulary themes</p>
            </div>
        </section>

        <!-- Words Section - Enchanted Library (hidden by default) -->
        <section class="words-section" id="words-section">
            <div class="words-header">
                <h2 class="words-title" id="current-category-title">
                    <i class="fas fa-paw"></i> Enchanted Animals
                </h2>
                <div class="words-actions">
                    <button class="btn btn-secondary" id="back-btn">
                        <i class="fas fa-arrow-left"></i> Return to Gardens
                    </button>
                    <button class="btn btn-warning" id="start-quiz-btn">
                        <i class="fas fa-magic"></i> Magical Quiz
                    </button>
                </div>
            </div>
            <div class="words-grid" id="words-grid">
                <!-- Words will be populated by JavaScript -->
            </div>
        </section>

        <!-- Quiz Section - Crystal Caves (hidden by default) -->
        <section class="quiz-section" id="quiz-section">
            <div class="quiz-header">
                <h2 class="quiz-title">✨ Crystal Cave Quiz</h2>
                <p class="quiz-subtitle" id="quiz-subtitle">Test your knowledge in our magical crystal caves! Answer correctly to earn XP and unlock treasures.</p>
                
                <div class="quiz-progress-container">
                    <div class="quiz-progress-label">
                        <span>Crystal <span id="current-question">1</span> of <span id="total-questions">10</span></span>
                        <span id="quiz-score">XP: 0</span>
                    </div>
                    <div class="quiz-progress-bar-container">
                        <div class="quiz-progress-bar" id="quiz-progress-bar"></div>
                    </div>
                </div>
            </div>
            
            <div class="quiz-content">
                <div class="quiz-question-container">
                    <div class="quiz-question" id="quiz-question">What is the authentic British pronunciation of this enchanting word?</div>
                    
                    <div class="quiz-options" id="quiz-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="quiz-feedback" id="quiz-feedback">
                    Brilliant! The authentic British pronunciation is /ˈkɒm.pjuː.tər/
                </div>
                
                <div class="quiz-controls">
                    <button class="btn btn-secondary" id="skip-btn">
                        <i class="fas fa-forward"></i> Skip Crystal
                    </button>
                    <button class="btn btn-primary" id="next-btn" style="display: none;">
                        <i class="fas fa-arrow-right"></i> Next Crystal
                    </button>
                    <button class="btn btn-success" id="submit-btn">
                        <i class="fas fa-gem"></i> Reveal Answer
                    </button>
                </div>
            </div>
            
            <div class="quiz-result" id="quiz-result">
                <div class="result-score" id="result-score">92</div>
                <div class="result-message" id="result-message">Magical Mastery!</div>
                <p style="color: rgba(255, 255, 255, 0.9); font-size: var(--text-xl); max-width: 650px; margin: 0 auto var(--space-8); line-height: 1.7;">
                    You've unlocked ancient wisdom! Your pronunciation skills shine like starlight. Continue your journey to become a true language master.
                </p>
                
                <div class="result-stats">
                    <div class="result-stat">
                        <div class="result-stat-value">280</div>
                        <div class="result-stat-label">XP Earned</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value">9/10</div>
                        <div class="result-stat-label">Crystals Solved</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value">✨</div>
                        <div class="result-stat-label">New Badge</div>
                    </div>
                </div>
                
                <div class="quiz-controls">
                    <button class="btn btn-secondary" id="retry-btn">
                        <i class="fas fa-redo"></i> Another Quest
                    </button>
                    <button class="btn btn-primary" id="finish-quiz-btn">
                        <i class="fas fa-home"></i> Return to Gardens
                    </button>
                </div>
            </div>
        </section>

        <!-- Achievements - Treasure Vault -->
        <section class="achievements-section" id="achievements-section">
            <div class="section-header">
                <h2 class="section-title">🏆 Treasure Vault</h2>
            </div>
            <div class="achievements-grid">
                <div class="achievement-card achievement-unlocked" onclick="showAchievement('First Steps', 'You\'ve learned your first 5 words! The journey begins.')">
                    <div class="achievement-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <div class="achievement-title">First Steps</div>
                    <div class="achievement-requirement">Learn 5 words</div>
                    <div class="achievement-progress">
                        <div class="achievement-progress-bar" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="achievement-card achievement-unlocked" onclick="showAchievement('Word Collector', 'You\'ve mastered 25 words! Your vocabulary garden is flourishing.')">
                    <div class="achievement-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="achievement-title">Word Collector</div>
                    <div class="achievement-requirement">Master 25 words</div>
                    <div class="achievement-progress">
                        <div class="achievement-progress-bar" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="achievement-card achievement-locked" onclick="showAchievement('Vocabulary Master', 'Master 100 words to unlock this legendary achievement!')">
                    <div class="achievement-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="achievement-title">Vocabulary Master</div>
                    <div class="achievement-requirement">Master 100 words</div>
                    <div class="achievement-progress">
                        <div class="achievement-progress-bar" style="width: 48%;"></div>
                    </div>
                </div>
                <div class="achievement-card achievement-locked" onclick="showAchievement('Streak Wizard', 'Maintain a 7-day learning streak to unlock this magical achievement!')">
                    <div class="achievement-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="achievement-title">Streak Wizard</div>
                    <div class="achievement-requirement">7 day streak</div>
                    <div class="achievement-progress">
                        <div class="achievement-progress-bar" style="width: 57%;"></div>
                    </div>
                </div>
                <div class="achievement-card achievement-locked" onclick="showAchievement('Pronunciation Pro', 'Score 100% on a pronunciation quiz to unlock this prestigious achievement!')">
                    <div class="achievement-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <div class="achievement-title">Pronunciation Pro</div>
                    <div class="achievement-requirement">Perfect quiz score</div>
                    <div class="achievement-progress">
                        <div class="achievement-progress-bar" style="width: 30%;"></div>
                    </div>
                </div>
                <div class="achievement-card achievement-locked" onclick="showAchievement('IELTS Ready', 'Master 250 words across all categories to unlock this ultimate achievement!')">
                    <div class="achievement-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="achievement-title">IELTS Ready</div>
                    <div class="achievement-requirement">250 mastered words</div>
                    <div class="achievement-progress">
                        <div class="achievement-progress-bar" style="width: 19%;"></div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer - Enchanted Forest -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-logo">English Master Pro</div>
                    <p class="footer-tagline">
                        Where language learning becomes a magical adventure. Master British English with joy, wonder, and authentic pronunciation.
                    </p>
                    <div style="display: flex; justify-content: center; gap: var(--space-4); margin-top: var(--space-5);">
                        <a href="#" class="footer-link" aria-label="Facebook" style="padding: 8px; border-radius: var(--radius-full); background: rgba(255,255,255,0.1);">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="footer-link" aria-label="Twitter" style="padding: 8px; border-radius: var(--radius-full); background: rgba(255,255,255,0.1);">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="footer-link" aria-label="Instagram" style="padding: 8px; border-radius: var(--radius-full); background: rgba(255,255,255,0.1);">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="footer-link" aria-label="YouTube" style="padding: 8px; border-radius: var(--radius-full); background: rgba(255,255,255,0.1);">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>✨ Magical Learning</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">British Pronunciation Guide</a></li>
                        <li><a href="#" class="footer-link">IELTS Preparation Secrets</a></li>
                        <li><a href="#" class="footer-link">Vocabulary Building Spells</a></li>
                        <li><a href="#" class="footer-link">Daily Learning Rituals</a></li>
                        <li><a href="#" class="footer-link">Pronunciation Perfection</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>🌿 Enchanted Features</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Spaced Repetition Magic</a></li>
                        <li><a href="#" class="footer-link">Crystal Cave Quizzes</a></li>
                        <li><a href="#" class="footer-link">Treasure Vault Achievements</a></li>
                        <li><a href="#" class="footer-link">Streak Wizard System</a></li>
                        <li><a href="#" class="footer-link">Magical Progress Tracking</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>🌟 Wisdom for Learners</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Study 15 minutes daily</a></li>
                        <li><a href="#" class="footer-link">Speak words aloud with confidence</a></li>
                        <li><a href="#" class="footer-link">Review mastered words weekly</a></li>
                        <li><a href="#" class="footer-link">Use new words in magical sentences</a></li>
                        <li><a href="#" class="footer-link">Celebrate every small victory</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>© 2026 English Master Pro • Crafted with ❤️ for language lovers worldwide • British Pronunciation Focus</p>
                <p style="margin-top: var(--space-3); font-size: var(--text-sm); opacity: 0.85;">
                    This enchanted platform uses authentic British English pronunciation (RP - Received Pronunciation) as its magical foundation.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Comprehensive magical vocabulary data with British pronunciation
        const categoriesData = {
            animals: {
                name: "Enchanted Animals",
                icon: "🦁",
                color: "#4338ca",
                description: "Discover magical creatures with authentic British pronunciations",
                words: [
                    { en: "Badger", ar: "خنزير غينيا", pronunciation: "/ˈbædʒ.ər/", difficulty: "medium", mastered: true, example: "The European badger is a protected species in the British countryside, known for its distinctive black and white face markings." },
                    { en: "Hedgehog", ar: "قنفذ", pronunciation: "/ˈhedʒ.hɒɡ/", difficulty: "medium", mastered: true, example: "Hedgehogs are nocturnal creatures commonly found in British gardens, curling into a spiky ball when threatened." },
                    { en: "Robin", ar: "طائر روبن", pronunciation: "/ˈrɒb.ɪn/", difficulty: "easy", mastered: true, example: "The robin is a beloved garden bird in Britain, often associated with Christmas and known for its bright red breast." },
                    { en: "Otter", ar: "ثعلب الماء", pronunciation: "/ˈɒt.ər/", difficulty: "medium", mastered: false, example: "River otters have made a remarkable comeback in British waterways after near extinction in the 20th century." },
                    { en: "Swan", ar: "بجعة", pronunciation: "/swɒn/", difficulty: "easy", mastered: true, example: "All unmarked mute swans on the River Thames are technically owned by the British monarch—a tradition dating back centuries." },
                    { en: "Red Squirrel", ar: "سنجاب أحمر", pronunciation: "/ˈred ˈskwɪr.əl/", difficulty: "medium", mastered: false, example: "The native red squirrel is endangered in Britain due to competition from the introduced grey squirrel species." },
                    { en: "Puffin", ar: "بفن", pronunciation: "/ˈpʌf.ɪn/", difficulty: "medium", mastered: false, example: "These charming seabirds with colourful beaks nest on coastal cliffs around Britain, especially in Scotland and Wales." },
                    { en: "Hare", ar: "أرنب بري", pronunciation: "/heər/", difficulty: "medium", mastered: false, example: "Unlike rabbits, hares live above ground and are known for their incredible speed and spectacular boxing displays in spring." }
                ]
            },
            nature: {
                name: "British Countryside",
                icon: "🌳",
                color: "#047857",
                description: "Vocabulary for Britain's magical natural landscapes",
                words: [
                    { en: "Moorland", ar: "أرض مستنقعية", pronunciation: "/ˈmɔː.lænd/", difficulty: "hard", mastered: false, example: "Dartmoor National Park features dramatic moorland landscapes where wild ponies roam freely across the open hills." },
                    { en: "Copse", ar: "غابة صغيرة", pronunciation: "/kɒps/", difficulty: "hard", mastered: false, example: "We spotted deer grazing at the edge of a small copse during our magical walk through the ancient woodland." },
                    { en: "Dale", ar: "وادي", pronunciation: "/deɪl/", difficulty: "medium", mastered: false, example: "The Yorkshire Dales are famous for their rolling hills, limestone cliffs, and picturesque stone-built villages." },
                    { en: "Fell", ar: "هضبة", pronunciation: "/fel/", difficulty: "hard", mastered: false, example: "Scafell Pike is the highest mountain in England, located in the Lake District's dramatic fell landscape." },
                    { en: "Tor", ar: "تلة صخرية", pronunciation: "/tɔːr/", difficulty: "hard", mastered: false, example: "Granite tors are distinctive rock formations found on Dartmoor and Bodmin Moor, created by millions of years of weathering." },
                    { en: "Vale", ar: "وادي خصب", pronunciation: "/veɪl/", difficulty: "medium", mastered: false, example: "The Vale of Evesham in Worcestershire is known as the 'garden of England' for its fruit orchards and market gardens." },
                    { en: "Weald", ar: "غابة كثيفة", pronunciation: "/wiːld/", difficulty: "hard", mastered: false, example: "The High Weald in Kent and Sussex is an Area of Outstanding Natural Beauty with ancient woodlands and rolling hills." },
                    { en: "Gill", ar: "وادي صغير", pronunciation: "/ɡɪl/", difficulty: "hard", mastered: false, example: "In Northern England, a gill refers to a narrow valley with a stream running through it, often steep-sided and wooded." }
                ]
            },
            daily_life: {
                name: "Daily Enchantments",
                icon: "🏠",
                color: "#b45309",
                description: "Essential vocabulary for everyday magic in Britain",
                words: [
                    { en: "Lift", ar: "مصعد", pronunciation: "/lɪft/", difficulty: "easy", mastered: true, example: "In Britain, we take the lift to the third floor of our enchanted tower, not the elevator." },
                    { en: "Biscuit", ar: "بسكويت", pronunciation: "/ˈbɪs.kɪt/", difficulty: "easy", mastered: true, example: "Would you like a digestive biscuit with your cup of Earl Grey tea?" },
                    { en: "Queue", ar: "طابور", pronunciation: "/kjuː/", difficulty: "medium", mastered: true, example: "British people are famous for patiently waiting in an orderly queue without pushing in—a true social magic." },
                    { en: "Pavement", ar: "رصيف", pronunciation: "/ˈpeɪv.mənt/", difficulty: "medium", mastered: false, example: "Please walk on the pavement, not on the road—it's where magical encounters often happen." },
                    { en: "Torch", ar: "مصباح يدوي", pronunciation: "/tɔːtʃ/", difficulty: "medium", mastered: false, example: "Don't forget to bring a torch for our evening walk along the coastal path beneath the starlit sky." },
                    { en: "Boot", ar: "صندوق السيارة", pronunciation: "/buːt/", difficulty: "medium", mastered: false, example: "Could you put the picnic basket in the boot of the car before our journey to the countryside?" },
                    { en: "Flat", ar: "شقة", pronunciation: "/flæt/", difficulty: "easy", mastered: true, example: "She lives in a charming flat on the fourth floor of a Victorian building in London's Covent Garden." },
                    { en: "Rubbish", ar: "نفايات", pronunciation: "/ˈrʌb.ɪʃ/", difficulty: "medium", mastered: false, example: "Please take the rubbish out to the bin before the magical collection gnomes arrive at dawn." }
                ]
            },
            food_drink: {
                name: "Culinary Magic",
                icon: "☕",
                color: "#c026d3",
                description: "British culinary vocabulary and dining enchantments",
                words: [
                    { en: "Scone", ar: "سكون", pronunciation: "/skɒn/", difficulty: "medium", mastered: false, example: "We enjoyed warm scones with clotted cream and strawberry jam during our magical afternoon tea ceremony." },
                    { en: "Crisps", ar: "رقائق بطاطس", pronunciation: "/krɪps/", difficulty: "easy", mastered: true, example: "Would you like cheese and onion crisps or the magical salt and vinegar flavour?" },
                    { en: "Chips", ar: "بطاطس مقلية", pronunciation: "/tʃɪps/", difficulty: "easy", mastered: true, example: "Fish and chips is Britain's national dish, best eaten wrapped in paper by the seaside as seagulls circle overhead." },
                    { en: "Pudding", ar: "حلوى", pronunciation: "/ˈpʊd.ɪŋ/", difficulty: "medium", mastered: false, example: "For pudding, we're having sticky toffee pudding with vanilla ice cream—a truly magical dessert experience." },
                    { en: "Courgette", ar: "كوسا", pronunciation: "/ˈkɔː.ʒɛt/", difficulty: "medium", mastered: false, example: "The recipe calls for two courgettes, sliced thinly and sautéed with garlic and fresh herbs." },
                    { en: "Aubergine", ar: "باذنجان", pronunciation: "/ˈəʊ.bə.dʒɪn/", difficulty: "medium", mastered: false, example: "Ratatouille is a French dish beloved in Britain, made with aubergine, courgette, and sweet peppers." },
                    { en: "Rocket", ar: "جرجير", pronunciation: "/ˈrɒk.ɪt/", difficulty: "medium", mastered: false, example: "Please add some peppery rocket to the salad for a magical flavour enhancement." },
                    { en: "Swede", ar: "لفت السويدي", pronunciation: "/swiːd/", difficulty: "hard", mastered: false, example: "Mashed swede is a traditional accompaniment to Sunday roast beef in Britain, with its distinctive golden colour." }
                ]
            },
            transport: {
                name: "Magical Journeys",
                icon: "🚂",
                color: "#0ea5e9",
                description: "British transport vocabulary for enchanted travels",
                words: [
                    { en: "Underground", ar: "مترو الأنفاق", pronunciation: "/ˈʌn.də.ɡraʊnd/", difficulty: "medium", mastered: true, example: "The London Underground, affectionately called the Tube, is the oldest metro system in the world, with stations steeped in history." },
                    { en: "Railway", ar: "سكك حديدية", pronunciation: "/ˈreɪl.weɪ/", difficulty: "medium", mastered: false, example: "Britain has a rich railway heritage with many preserved steam railways offering magical journeys through stunning landscapes." },
                    { en: "Platform", ar: "رصيف المحطة", pronunciation: "/ˈplæt.fɔːm/", difficulty: "medium", mastered: false, example: "Your train to Edinburgh will depart from platform 9 in ten minutes—watch for the magical departure board." },
                    { en: "Single ticket", ar: "تذكرة ذهاب فقط", pronunciation: "/ˈsɪŋ.ɡəl ˈtɪk.ɪt/", difficulty: "medium", mastered: false, example: "I'd like a single ticket to Manchester, please—the one-way journey to adventure awaits." },
                    { en: "Return ticket", ar: "تذكرة ذهاب وعودة", pronunciation: "/rɪˈtɜːn ˈtɪk.ɪt/", difficulty: "medium", mastered: false, example: "A return ticket is often better value than two singles for the same magical journey." },
                    { en: "Zebra crossing", ar: "ممر مشاة", pronunciation: "/ˈzeb.rə ˌkrɒs.ɪŋ/", difficulty: "medium", mastered: false, example: "Pedestrians have the right of way at a zebra crossing in the UK—drivers must stop as if by magic." },
                    { en: "Roundabout", ar: "دوار مروري", pronunciation: "/ˈraʊnd.ə.baʊt/", difficulty: "medium", mastered: false, example: "Take the second exit at the roundabout to reach the city centre—a dance of vehicles moving in harmony." },
                    { en: "Petrol", ar: "بنزين", pronunciation: "/ˈpet.rol/", difficulty: "easy", mastered: true, example: "We need to stop for petrol before we reach the motorway and continue our enchanted journey." }
                ]
            }
        };

        // State management
        let state = {
            currentCategory: null,
            quiz: {
                active: false,
                currentQuestion: 0,
                score: 0,
                questions: []
            }
        };

        // DOM Elements
        const categoriesGrid = document.getElementById('categories-grid');
        const wordsSection = document.getElementById('words-section');
        const wordsGrid = document.getElementById('words-grid');
        const currentCategoryTitle = document.getElementById('current-category-title');
        const quizSection = document.getElementById('quiz-section');
        const quizOptions = document.getElementById('quiz-options');
        const quizFeedback = document.getElementById('quiz-feedback');
        const quizProgressBar = document.getElementById('quiz-progress-bar');
        const confettiContainer = document.getElementById('confetti-container');

        // Initialize the magical experience
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            setupEventListeners();
            createMagicalParticles();
            
            // Simulate some progress for the magical experience
            setTimeout(() => {
                celebrateAchievement('Welcome, Language Explorer!');
            }, 1500);
        });

        // Render magical categories
        function renderCategories() {
            categoriesGrid.innerHTML = '';
            
            Object.entries(categoriesData).forEach(([key, category]) => {
                const totalWords = category.words.length;
                const masteredWords = category.words.filter(w => w.mastered).length;
                const progress = totalWords > 0 ? (masteredWords / totalWords) * 100 : 0;
                
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                categoryCard.innerHTML = `
                    <div class="category-header">
                        <div class="category-icon">${category.icon}</div>
                        <h3 class="category-title">${category.name}</h3>
                        <p class="category-desc">${category.description}</p>
                    </div>
                    <div class="category-footer">
                        <div class="category-stats">
                            <div class="category-stat">
                                <div class="category-stat-value">${masteredWords}</div>
                                <div class="category-stat-label">Mastered</div>
                            </div>
                            <div class="category-stat">
                                <div class="category-stat-value">${totalWords}</div>
                                <div class="category-stat-label">Total</div>
                            </div>
                        </div>
                        <div class="category-progress">
                            <div class="category-progress-bar" style="width: ${progress}%; background: linear-gradient(90deg, ${category.color}, #8b5cf6);"></div>
                        </div>
                    </div>
                `;
                
                categoryCard.addEventListener('click', () => showWords(key));
                categoriesGrid.appendChild(categoryCard);
            });
        }

        // Show words for a magical category
        function showWords(categoryKey) {
            state.currentCategory = categoryKey;
            const category = categoriesData[categoryKey];
            
            // Update header with magical animation
            currentCategoryTitle.innerHTML = `
                <i class="fas fa-${getCategoryIcon(categoryKey)}"></i> ${category.name}
            `;
            
            // Show words section with entrance animation
            wordsSection.style.display = 'block';
            quizSection.style.display = 'none';
            
            // Scroll smoothly to section
            wordsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Render words with magical delay
            setTimeout(renderWords, 300);
        }

        // Get category icon for header
        function getCategoryIcon(categoryKey) {
            const icons = {
                animals: 'paw',
                nature: 'tree',
                daily_life: 'home',
                food_drink: 'mug-hot',
                transport: 'train'
            };
            return icons[categoryKey] || 'book';
        }

        // Render magical words
        function renderWords() {
            wordsGrid.innerHTML = '';
            
            if (!state.currentCategory) return;
            
            const category = categoriesData[state.currentCategory];
            
            category.words.forEach((word, index) => {
                const wordCard = document.createElement('div');
                wordCard.className = `word-card ${word.mastered ? 'mastered' : ''}`;
                wordCard.innerHTML = `
                    <div class="word-header">
                        <div class="english-word">${word.en}</div>
                        <div class="word-difficulty difficulty-${word.difficulty}">${word.difficulty === 'easy' ? 'E' : word.difficulty === 'medium' ? 'M' : 'H'}</div>
                    </div>
                    <div class="arabic-word">${word.ar}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="word-example">${word.example}</div>
                    <div class="word-actions">
                        <button class="word-btn speak" aria-label="Hear magical pronunciation of ${word.en}">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button class="word-btn ${word.mastered ? 'learn' : 'quiz'}" aria-label="${word.mastered ? 'Test your mastery' : 'Challenge yourself'}">
                            <i class="fas ${word.mastered ? 'fa-check-circle' : 'fa-question-circle'}"></i>
                        </button>
                        <button class="word-btn ${word.mastered ? 'success' : 'primary'}" aria-label="${word.mastered ? 'Already mastered' : 'Mark as mastered'}">
                            <i class="fas fa-${word.mastered ? 'star' : 'star-half-alt'}"></i>
                        </button>
                    </div>
                `;
                
                // Add magical event listeners
                const speakBtn = wordCard.querySelector('.speak');
                const toggleBtn = wordCard.querySelector('.quiz, .learn');
                const masterBtn = wordCard.querySelector('.primary, .success');
                
                speakBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    speakWord(word.en);
                    createWordConfetti(speakBtn.getBoundingClientRect());
                });
                
                toggleBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleMastered(index);
                    toggleBtn.classList.add('celebrate');
                    setTimeout(() => toggleBtn.classList.remove('celebrate'), 500);
                });
                
                masterBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (!word.mastered) {
                        markAsMastered(index);
                        masterBtn.classList.add('celebrate');
                        setTimeout(() => masterBtn.classList.remove('celebrate'), 500);
                        createConfetti(25);
                        setTimeout(() => {
                            celebrateAchievement(`✨ "${word.en}" mastered!`);
                        }, 400);
                    }
                });
                
                wordsGrid.appendChild(wordCard);
            });
        }

        // Magical British pronunciation
        function speakWord(word) {
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-GB';
            utterance.rate = 0.92;
            utterance.pitch = 1.05;
            
            // Find British voice
            const voices = speechSynthesis.getVoices();
            const britishVoice = voices.find(voice => 
                voice.lang === 'en-GB' || voice.name.includes('UK') || voice.name.includes('British')
            );
            
            if (britishVoice) {
                utterance.voice = britishVoice;
            }
            
            speechSynthesis.speak(utterance);
        }

        // Toggle mastered status with magical feedback
        function toggleMastered(index) {
            if (!state.currentCategory) return;
            
            const category = categoriesData[state.currentCategory];
            const word = category.words[index];
            word.mastered = !word.mastered;
            
            renderWords();
            renderCategories();
            
            if (word.mastered) {
                createConfetti(15);
                setTimeout(() => {
                    celebrateAchievement(`"${word.en}" added to your mastered collection!`);
                }, 300);
            }
        }

        // Mark as mastered with celebration
        function markAsMastered(index) {
            if (!state.currentCategory) return;
            
            const category = categoriesData[state.currentCategory];
            const word = category.words[index];
            
            if (!word.mastered) {
                word.mastered = true;
                renderWords();
                renderCategories();
            }
        }

        // Create magical confetti celebration
        function createConfetti(count = 30) {
            confettiContainer.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 85%, 65%)`;
                confetti.style.animationDuration = `${3 + Math.random() * 2}s`;
                confetti.style.animationDelay = `${Math.random() * 1}s`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.width = `${8 + Math.random() * 8}px`;
                confetti.style.height = confetti.style.width;
                
                confettiContainer.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Create word-specific confetti
        function createWordConfetti(rect) {
            const count = 12;
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${rect.left + rect.width/2 + (Math.random() - 0.5) * 40}px`;
                confetti.style.top = `${rect.top + rect.height/2}px`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 85%, 65%)`;
                confetti.style.animation = `confetti-fall 2.5s forwards`;
                confetti.style.width = `${6 + Math.random() * 6}px`;
                confetti.style.height = confetti.style.width;
                confetti.style.opacity = '0.95';
                
                document.body.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => {
                    confetti.remove();
                }, 2600);
            }
        }

        // Celebrate achievement with magical effects
        function celebrateAchievement(message) {
            createConfetti(40);
            
            // Show magical message
            const achievementMsg = document.createElement('div');
            achievementMsg.style.position = 'fixed';
            achievementMsg.style.top = '20%';
            achievementMsg.style.left = '50%';
            achievementMsg.style.transform = 'translateX(-50%)';
            achievementMsg.style.background = 'linear-gradient(135deg, rgba(67, 56, 202, 0.95), rgba(126, 58, 242, 0.95))';
            achievementMsg.style.color = 'white';
            achievementMsg.style.padding = '1.5rem 2.5rem';
            achievementMsg.style.borderRadius = '28px';
            achievementMsg.style.fontSize = '1.5rem';
            achievementMsg.style.fontFamily = "'Quicksand', 'Manrope', sans-serif";
            achievementMsg.style.fontWeight = '700';
            achievementMsg.style.boxShadow = '0 20px 50px rgba(99, 102, 241, 0.5)';
            achievementMsg.style.zIndex = '2000';
            achievementMsg.style.textAlign = 'center';
            achievementMsg.style.maxWidth = '80%';
            achievementMsg.style.animation = 'slide-up 0.6s ease, fade-out 0.8s 2.5s forwards';
            achievementMsg.innerHTML = `<i class="fas fa-star" style="margin-right: 10px;"></i> ${message}`;
            
            document.body.appendChild(achievementMsg);
            
            // Remove after animation
            setTimeout(() => {
                achievementMsg.remove();
            }, 3500);
        }

        // Show achievement details
        function showAchievement(title, description) {
            celebrateAchievement(`${title}: ${description}`);
        }

        // Setup magical event listeners
        function setupEventListeners() {
            // Back button
            document.getElementById('back-btn').addEventListener('click', () => {
                wordsSection.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Start quiz button
            document.getElementById('start-quiz-btn').addEventListener('click', () => {
                startMagicalQuiz();
            });
            
            // Quiz option selection
            quizOptions.addEventListener('click', (e) => {
                if (e.target.classList.contains('quiz-option') || e.target.closest('.quiz-option')) {
                    const option = e.target.closest('.quiz-option');
                    if (!option) return;
                    
                    // Remove selected class from all options
                    document.querySelectorAll('.quiz-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    option.classList.add('selected');
                }
            });
            
            // Submit answer
            document.getElementById('submit-btn').addEventListener('click', () => {
                submitQuizAnswer();
            });
            
            // Next question
            document.getElementById('next-btn').addEventListener('click', () => {
                nextQuizQuestion();
            });
            
            // Skip question
            document.getElementById('skip-btn').addEventListener('click', () => {
                skipQuizQuestion();
            });
            
            // Retry quiz
            document.getElementById('retry-btn').addEventListener('click', () => {
                startMagicalQuiz();
            });
            
            // Finish quiz
            document.getElementById('finish-quiz-btn').addEventListener('click', () => {
                quizSection.style.display = 'none';
                wordsSection.style.display = 'block';
                wordsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            // Add category card
            document.getElementById('add-category-card').addEventListener('click', () => {
                celebrateAchievement("✨ New garden created! Your vocabulary kingdom grows stronger.");
                createConfetti(35);
            });
            
            // Load voices for speech synthesis
            if ('speechSynthesis' in window) {
                speechSynthesis.onvoiceschanged = () => {
                    speechSynthesis.getVoices();
                };
                // Initial load
                setTimeout(() => {
                    speechSynthesis.getVoices();
                }, 100);
            }
        }

        // Start magical quiz
        function startMagicalQuiz() {
            if (!state.currentCategory) {
                alert('✨ Please select a magical garden first!');
                return;
            }
            
            // Generate magical questions
            state.quiz.questions = generateMagicalQuestions(state.currentCategory);
            state.quiz.currentQuestion = 0;
            state.quiz.score = 0;
            state.quiz.active = true;
            
            // Show quiz section
            wordsSection.style.display = 'none';
            quizSection.style.display = 'block';
            quizSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Hide result initially
            document.getElementById('quiz-result').style.display = 'none';
            document.querySelector('.quiz-content').style.display = 'block';
            
            // Render first question
            renderQuizQuestion();
        }

        // Generate magical quiz questions
        function generateMagicalQuestions(categoryKey) {
            const category = categoriesData[categoryKey];
            const words = [...category.words];
            
            // Shuffle words
            for (let i = words.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [words[i], words[j]] = [words[j], words[i]];
            }
            
            // Create questions from first 5 words
            const questions = words.slice(0, 5).map(word => ({
                type: 'pronunciation',
                word: word.en,
                pronunciation: word.pronunciation,
                options: generatePronunciationOptions(word.pronunciation),
                correctAnswer: word.pronunciation,
                difficulty: word.difficulty,
                example: word.example
            }));
            
            return questions;
        }

        // Generate pronunciation options
        function generatePronunciationOptions(correct) {
            const options = [correct];
            const variations = [
                correct.replace(/iː/g, 'ɪ').replace(/ɑː/g, 'æ'),
                correct.replace(/θ/g, 's').replace(/ð/g, 'z'),
                correct.replace(/ʃ/g, 's').replace(/tʃ/g, 'ʃ'),
                correct.replace(/dʒ/g, 'j').replace(/ŋ/g, 'n'),
                correct.replace(/əʊ/g, 'oʊ').replace(/aɪ/g, 'ɑɪ')
            ];
            
            // Add unique variations
            while (options.length < 4 && variations.length > 0) {
                const randomIndex = Math.floor(Math.random() * variations.length);
                const option = variations.splice(randomIndex, 1)[0];
                if (option && !options.includes(option)) {
                    options.push(option);
                }
            }
            
            // Shuffle options
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }
            
            return options;
        }

        // Render quiz question
        function renderQuizQuestion() {
            if (!state.quiz.active || state.quiz.currentQuestion >= state.quiz.questions.length) {
                showQuizResults();
                return;
            }
            
            const question = state.quiz.questions[state.quiz.currentQuestion];
            document.getElementById('quiz-question').textContent = 
                `What is the authentic British pronunciation of "${question.word}"?`;
            
            // Clear and repopulate options
            quizOptions.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option';
                optionEl.innerHTML = `<div style="position: relative; width: 100%; height: 100%;">${option}</div>`;
                optionEl.dataset.index = index;
                quizOptions.appendChild(optionEl);
            });
            
            // Reset UI
            quizFeedback.style.display = 'none';
            document.getElementById('submit-btn').style.display = 'block';
            document.getElementById('next-btn').style.display = 'none';
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                opt.style.cursor = 'pointer';
            });
            
            // Update progress
            document.getElementById('current-question').textContent = state.quiz.currentQuestion + 1;
            document.getElementById('total-questions').textContent = state.quiz.questions.length;
            document.getElementById('quiz-score').textContent = `XP: ${state.quiz.score}`;
            quizProgressBar.style.width = `${((state.quiz.currentQuestion) / state.quiz.questions.length) * 100}%`;
        }

        // Submit quiz answer
        function submitQuizAnswer() {
            const selectedOption = document.querySelector('.quiz-option.selected');
            if (!selectedOption) {
                celebrateAchievement("✨ Please select a crystal before revealing its magic!");
                return;
            }
            
            const question = state.quiz.questions[state.quiz.currentQuestion];
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const selectedAnswer = question.options[selectedIndex];
            const isCorrect = selectedAnswer === question.correctAnswer;
            
            // Show feedback with magical animation
            quizFeedback.textContent = isCorrect ? 
                `✨ Brilliant! The authentic British pronunciation is ${question.correctAnswer}` :
                `💫 Almost! The correct British pronunciation is ${question.correctAnswer}`;
            
            quizFeedback.className = `quiz-feedback ${isCorrect ? 'feedback-correct' : 'feedback-incorrect'}`;
            quizFeedback.style.display = 'block';
            
            // Highlight answers
            document.querySelectorAll('.quiz-option').forEach((opt, index) => {
                if (index === selectedIndex && !isCorrect) {
                    opt.classList.add('incorrect');
                }
                if (question.options[index] === question.correctAnswer) {
                    opt.classList.add('correct');
                }
                opt.style.cursor = 'default';
            });
            
            // Update score and XP
            if (isCorrect) {
                const points = question.difficulty === 'easy' ? 40 : question.difficulty === 'medium' ? 60 : 80;
                state.quiz.score += points;
                document.getElementById('total-xp').textContent = 
                    (parseInt(document.getElementById('total-xp').textContent.replace(/,/g, '')) + points)
                    .toString()
                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            
            // Show next button
            document.getElementById('submit-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'block';
            
            // Magical celebration for correct answer
            if (isCorrect) {
                createWordConfetti(selectedOption.getBoundingClientRect());
                setTimeout(() => {
                    celebrateAchievement(isCorrect ? "✨ Correct! Your pronunciation magic grows stronger!" : "💫 Keep practicing—your accent will soon be perfectly British!");
                }, 400);
            }
        }

        // Next quiz question
        function nextQuizQuestion() {
            state.quiz.currentQuestion++;
            renderQuizQuestion();
        }

        // Skip quiz question
        function skipQuizQuestion() {
            state.quiz.currentQuestion++;
            if (state.quiz.currentQuestion < state.quiz.questions.length) {
                renderQuizQuestion();
                celebrateAchievement("💫 Crystal skipped—new magic awaits!");
            } else {
                showQuizResults();
            }
        }

        // Show quiz results
        function showQuizResults() {
            const scorePercent = Math.round((state.quiz.score / (state.quiz.questions.length * 80)) * 100);
            const scoreDisplay = Math.max(70, Math.min(100, scorePercent)); // Minimum 70% for encouragement
            
            document.getElementById('result-score').textContent = scoreDisplay;
            document.getElementById('result-message').textContent = 
                scoreDisplay >= 90 ? '✨ Magical Mastery!' :
                scoreDisplay >= 80 ? '🌟 Brilliant Wizard!' :
                scoreDisplay >= 70 ? '💫 Skilled Apprentice!' : '🔮 Keep Practicing!';
            
            // Show result section
            document.querySelector('.quiz-content').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'block';
            
            // Magical celebration
            createConfetti(50);
            setTimeout(() => {
                celebrateAchievement(`✨ Quiz completed! You earned ${state.quiz.score} XP and advanced your British pronunciation skills!`);
            }, 500);
            
            // Level up animation if score is high
            if (scoreDisplay >= 85) {
                document.getElementById('xp-bar').classList.add('level-up-animation');
                setTimeout(() => {
                    document.getElementById('xp-bar').classList.remove('level-up-animation');
                }, 1000);
            }
        }

        // Create magical floating particles
        function createMagicalParticles() {
            const particleCount = 25;
            const container = document.body;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '0';
                particle.style.fontSize = `${0.5 + Math.random() * 1.2}rem`;
                particle.style.opacity = `${0.2 + Math.random() * 0.5}`;
                particle.style.color = `hsl(${Math.random() * 360}, 70%, 70%)`;
                particle.style.textShadow = '0 0 8px rgba(255,255,255,0.8)';
                particle.style.animation = `float ${8 + Math.random() * 12}s linear infinite`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.innerHTML = ['✨', '💫', '🌟', '⭐', '🔮'].Math.floor(Math.random() * 5)];
                
                // Random floating animation
                const keyframes = `
                    @keyframes float-${i} {
                        0%, 100% { transform: translate(0, 0) rotate(0deg); }
                        25% { transform: translate(${10 + Math.random() * 20}px, ${-20 - Math.random() * 30}px) rotate(${30 + Math.random() * 60}deg); }
                        50% { transform: translate(${20 + Math.random() * 30}px, ${-40 - Math.random() * 40}px) rotate(${90 + Math.random() * 90}deg); }
                        75% { transform: translate(${10 + Math.random() * 20}px, ${-30 - Math.random() * 30}px) rotate(${180 + Math.random() * 90}deg); }
                    }
                `;
                
                const style = document.createElement('style');
                style.innerHTML = keyframes;
                document.head.appendChild(style);
                
                particle.style.animationName = `float-${i}`;
                
                container.appendChild(particle);
            }
        }

        // Magical keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Press M to toggle mastered status of first word
            if (e.key === 'm' && state.currentCategory) {
                toggleMastered(0);
            }
            
            // Press P to hear pronunciation of first word
            if (e.key === 'p' && state.currentCategory) {
                const category = categoriesData[state.currentCategory];
                if (category.words.length > 0) {
                    speakWord(category.words[0].en);
                    createConfetti(10);
                }
            }
            
            // Press Q to start quiz
            if (e.key === 'q' && state.currentCategory) {
                startMagicalQuiz();
            }
            
            // Press Escape to go back
            if (e.key === 'Escape' && wordsSection.style.display === 'block') {
                wordsSection.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        // Make the experience even more magical on load
        window.addEventListener('load', () => {
            // Gentle entrance animation for the whole page
            document.body.style.opacity = '0';
            document.body.style.transform = 'translateY(20px)';
            document.body.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            
            setTimeout(() => {
                document.body.style.opacity = '1';
                document.body.style.transform = 'translateY(0)';
                
                // Magical welcome message
                setTimeout(() => {
                    celebrateAchievement("✨ Welcome, Language Explorer! Your magical journey to master British English begins now.");
                }, 1200);
            }, 300);
        });
    </script>
</body>
                    </html>
