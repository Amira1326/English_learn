<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VocabMaster Categories ğŸ—‚ï¸</title>
<style>
:root{--primary:#6c5ce7;--secondary:#fab1a0;--success:#00b894;--bg:#f0f2f5;--card:#ffffff;--text:#2d3436}
.dark{--bg:#1a1a2e;--card:#16213e;--text:#f8f9fa;--primary:#74b9ff}

*{box-sizing:border-box; transition: 0.3s}
body{margin:0; font-family: system-ui, sans-serif; background:var(--bg); color:var(--text); direction: ltr;}

header{background: var(--card); padding:10px 15px; display:flex; justify-content:space-between; align-items:center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); position: sticky; top:0; z-index:1000}
.container{max-width: 800px; margin: auto; padding: 15px}

.main-card { background: var(--card); padding: 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
h3{margin-top:0; border-left: 4px solid var(--primary); padding-left: 10px; text-align: left;}

/* Categories Chips */
.cat-container { display: flex; gap: 8px; flex-wrap: wrap; margin: 10px 0; justify-content: flex-start; }
.cat-chip { background: var(--bg); padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; cursor: pointer; border: 1px solid transparent; display: flex; align-items: center; gap: 5px;}
.cat-chip.active { background: var(--primary); color: white; }
.cat-chip .del-cat { color: var(--danger); font-weight: bold; margin-left: 5px; cursor: pointer; }

/* Form Styles */
.input-group { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px; }
@media(min-width: 500px) { .input-group { grid-template-columns: 1fr 1fr; } .full { grid-column: 1 / -1; } }
input, select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; background: var(--bg); color: var(--text); }

.btn { border: none; padding: 12px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; width: 100%; }
.btn-p { background: var(--primary); color: white; }
.btn-s { background: var(--secondary); color: white; margin-top: 10px; }

/* Table */
.scroll-table { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; margin-top: 15px; min-width: 450px; }
th, td { padding: 12px; text-align: left; border-bottom: 1px solid rgba(0,0,0,0.05); }
.badge { background: rgba(108, 92, 231, 0.1); color: var(--primary); padding: 3px 8px; border-radius: 5px; font-size: 0.75rem; }
</style>
</head>
<body>

<header>
    <div style="font-weight: bold; color: var(--primary)">VocabManager ğŸ—‚ï¸</div>
    <button onclick="document.body.classList.toggle('dark')" style="background:none; border:none; cursor:pointer; font-size:1.2rem">ğŸŒ“</button>
</header>

<div class="container">
    
    <div class="main-card">
        <h3>ğŸ“‚ ÙØ¦Ø§Øª Ø§Ù„ÙƒÙ„Ù…Ø§Øª</h3>
        <p style="font-size: 0.8rem; opacity: 0.7; text-align: left;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ÙØ¦Ø© Ù„Ù„ÙÙ„ØªØ±Ø©ØŒ Ø£Ùˆ Ø£Ø¶Ù ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø©:</p>
        
        <div class="cat-container" id="categoryChips">
            </div>

        <div class="input-group" style="grid-template-columns: 1fr auto; margin-top: 15px;">
            <input id="newCatInput" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø·Ø¨Ø®ØŒ Ø¨Ø±Ù…Ø¬Ø©)">
            <button class="btn btn-p" onclick="addNewCategory()" style="width: auto;">Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø©</button>
        </div>
    </div>

    <div class="main-card">
        <h3>â• Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
        <div class="input-group">
            <input id="wordIn" placeholder="Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©">
            <input id="meanIn" placeholder="Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ">
            <select id="catSelect" class="full"></select>
            <button class="btn btn-p full" onclick="saveWord()">Ø­ÙØ¸ Ø§Ù„ÙƒÙ„Ù…Ø© ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©</button>
        </div>
    </div>

    <div class="main-card">
        <h3 id="listTitle">ÙƒÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</h3>
        <input id="searchBar" oninput="render()" placeholder="ğŸ” Ø§Ø¨Ø­Ø« ÙÙŠ ÙƒÙ„Ù…Ø§ØªÙƒ..." style="margin-bottom: 10px;">
        
        <div class="scroll-table">
            <table id="vocabTable">
                <thead>
                    <tr>
                        <th>Ø§Ù„ÙƒÙ„Ù…Ø©</th>
                        <th>Ø§Ù„Ù…Ø¹Ù†Ù‰</th>
                        <th>Ø§Ù„ÙØ¦Ø©</th>
                        <th>Ø­Ø°Ù</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

</div>

<script>
// Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
let vocabData = JSON.parse(localStorage.getItem('vocabCatData')) || {
    words: [],
    categories: ['Ø¹Ø§Ù…', 'Ø¹Ù…Ù„', 'Ø³ÙØ±']
};

let activeFilter = 'Ø§Ù„ÙƒÙ„';

function saveData() {
    localStorage.setItem('vocabCatData', JSON.stringify(vocabData));
    render();
}

// Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø©
function addNewCategory() {
    const val = newCatInput.value.trim();
    if(val && !vocabData.categories.includes(val)) {
        vocabData.categories.push(val);
        newCatInput.value = '';
        saveData();
    }
}

// Ø­Ø°Ù ÙØ¦Ø©
function deleteCategory(catName, e) {
    e.stopPropagation(); // Ù…Ù†Ø¹ ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø­Ø°Ù
    if(confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙØ¦Ø© "${catName}"ØŸ (Ù„Ù† ØªØ­Ø°Ù Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø§)`)) {
        vocabData.categories = vocabData.categories.filter(c => c !== catName);
        if(activeFilter === catName) activeFilter = 'Ø§Ù„ÙƒÙ„';
        saveData();
    }
}

// Ø­ÙØ¸ ÙƒÙ„Ù…Ø©
function saveWord() {
    const w = wordIn.value.trim();
    const m = meanIn.value.trim();
    const c = catSelect.value;
    if(!w || !m) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„");

    vocabData.words.unshift({ id: Date.now(), w, m, c });
    wordIn.value = ''; meanIn.value = '';
    saveData();
}

function deleteWord(id) {
    vocabData.words = vocabData.words.filter(w => w.id !== id);
    saveData();
}

// Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠ
function speak(txt) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(txt);
    msg.lang = 'en-GB';
    msg.rate = 0.9;
    window.speechSynthesis.speak(msg);
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function render() {
    // 1. ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ¦Ø§Øª (Chips)
    const chipsHtml = `<span class="cat-chip ${activeFilter === 'Ø§Ù„ÙƒÙ„' ? 'active' : ''}" onclick="filterBy('Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</span>` +
        vocabData.categories.map(c => `
            <span class="cat-chip ${activeFilter === c ? 'active' : ''}" onclick="filterBy('${c}')">
                ${c} <span class="del-cat" onclick="deleteCategory('${c}', event)">Ã—</span>
            </span>
        `).join('');
    categoryChips.innerHTML = chipsHtml;

    // 2. ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± (Select)
    catSelect.innerHTML = vocabData.categories.map(c => `<option value="${c}">${c}</option>`).join('');

    // 3. ÙÙ„ØªØ±Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª
    let filtered = vocabData.words;
    if(activeFilter !== 'Ø§Ù„ÙƒÙ„') {
        filtered = filtered.filter(w => w.c === activeFilter);
    }
    const search = searchBar.value.toLowerCase();
    filtered = filtered.filter(w => w.w.toLowerCase().includes(search) || w.m.includes(search));

    // 4. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    tableBody.innerHTML = filtered.map(w => `
        <tr>
            <td onclick="speak('${w.w}')" style="cursor:pointer"><b>${w.w}</b> ğŸ”Š</td>
            <td>${w.m}</td>
            <td><span class="badge">${w.c}</span></td>
            <td onclick="deleteWord(${w.id})" style="cursor:pointer; color:red">ğŸ—‘ï¸</td>
        </tr>
    `).join('');

    listTitle.innerText = activeFilter === 'Ø§Ù„ÙƒÙ„' ? 'ÙƒÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª' : `ÙƒÙ„Ù…Ø§Øª ÙØ¦Ø©: ${activeFilter}`;
}

function filterBy(cat) {
    activeFilter = cat;
    render();
}

// Ø§Ù„ØªØ´ØºÙŠÙ„ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
render();
</script>
</body>
</html>
