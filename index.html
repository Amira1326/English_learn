<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional English Learning Platform with British Pronunciation, AI-Powered Quizzes & Advanced Vocabulary Builder">
    <meta name="keywords" content="English learning, IELTS preparation, British pronunciation, vocabulary builder, gamified learning, spaced repetition">
    <title>English Master Pro | Ultimate Learning Platform v4.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Manrope:wght@600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Core Colors */
            --primary-50: #f0f2ff;
            --primary-100: #e0e4ff;
            --primary-200: #c7ceff;
            --primary-300: #a3b1ff;
            --primary-400: #8596ff;
            --primary-500: #6366f1;
            --primary-600: #4f46e5;
            --primary-700: #4338ca;
            --primary-800: #3730a3;
            --primary-900: #312e81;
            
            --success-50: #ecfdf5;
            --success-100: #d1fae5;
            --success-500: #10b981;
            --success-600: #059669;
            
            --warning-50: #fffbeb;
            --warning-100: #fef3c7;
            --warning-500: #f59e0b;
            --warning-600: #d97706;
            
            --danger-50: #fef2f2;
            --danger-100: #fee2e2;
            --danger-500: #ef4444;
            --danger-600: #dc2626;
            
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --gray-900: #0f172a;
            
            /* Semantic Colors */
            --text-primary: var(--gray-900);
            --text-secondary: var(--gray-600);
            --text-tertiary: var(--gray-500);
            --bg-surface: var(--gray-50);
            --bg-elevated: white;
            --border-color: var(--gray-200);
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, var(--primary-500), var(--primary-600), var(--primary-700));
            --gradient-success: linear-gradient(135deg, var(--success-500), var(--success-600));
            --gradient-warning: linear-gradient(135deg, var(--warning-500), var(--warning-600));
            --gradient-danger: linear-gradient(135deg, var(--danger-500), var(--danger-600));
            
            /* Spacing System */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-7: 1.75rem;
            --space-8: 2rem;
            --space-9: 2.25rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            --space-24: 6rem;
            --space-28: 7rem;
            --space-32: 8rem;
            
            /* Border Radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --radius-3xl: 2rem;
            --radius-full: 9999px;
            
            /* Transitions */
            --transition-fast: 0.15s;
            --transition-normal: 0.3s;
            --transition-slow: 0.5s;
            
            /* Typography */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;
            --text-5xl: 3rem;
            --text-6xl: 3.75rem;
            --text-7xl: 4.5rem;
            --text-8xl: 6rem;
            --text-9xl: 8rem;
            
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-display: 'Manrope', 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            
            /* Z-Index */
            --z-0: 0;
            --z-10: 10;
            --z-20: 20;
            --z-30: 30;
            --z-40: 40;
            --z-50: 50;
        }

        .dark {
            --text-primary: var(--gray-50);
            --text-secondary: var(--gray-300);
            --text-tertiary: var(--gray-400);
            --bg-surface: var(--gray-900);
            --bg-elevated: var(--gray-800);
            --border-color: var(--gray-700);
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.25);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.25);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-family: var(--font-sans);
            background-color: var(--bg-surface);
            color: var(--text-primary);
            scroll-padding-top: 4rem;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bg-surface) 0%, var(--gray-100) 100%);
            background-attachment: fixed;
            transition: background-color var(--transition-normal);
        }

        .dark body {
            background: linear-gradient(135deg, var(--gray-900) 0%, var(--gray-800) 100%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-4);
        }

        /* Header & Navigation */
        header {
            background-color: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(12px);
            position: sticky;
            top: 0;
            z-index: var(--z-50);
            box-shadow: var(--shadow-md);
            border-bottom: 1px solid var(--border-color);
            transition: background-color var(--transition-normal), border-color var(--transition-normal);
        }

        .dark header {
            background-color: rgba(30, 41, 59, 0.92);
            border-bottom-color: var(--gray-700);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3) var(--space-4);
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            text-decoration: none;
            font-family: var(--font-display);
            font-weight: 800;
            font-size: var(--text-2xl);
            color: var(--primary-600);
            transition: color var(--transition-fast);
        }

        .dark .logo {
            color: var(--primary-400);
        }

        .logo-icon {
            font-size: var(--text-3xl);
        }

        .logo-text {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            display: flex;
            gap: var(--space-1);
            list-style: none;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: var(--text-sm);
            color: var(--text-secondary);
            text-decoration: none;
            transition: all var(--transition-fast);
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-600);
            background-color: var(--primary-50);
        }

        .dark .nav-link:hover,
        .dark .nav-link.active {
            color: var(--primary-400);
            background-color: rgba(99, 102, 241, 0.1);
        }

        .nav-link i {
            font-size: var(--text-lg);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-elevated);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: var(--text-lg);
        }

        .theme-toggle:hover {
            color: var(--primary-600);
            background-color: var(--primary-50);
        }

        .dark .theme-toggle {
            background-color: var(--gray-700);
            border-color: var(--gray-600);
        }

        .dark .theme-toggle:hover {
            color: var(--primary-400);
            background-color: rgba(99, 102, 241, 0.15);
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: var(--text-lg);
            cursor: pointer;
            transition: transform var(--transition-fast);
        }

        .user-avatar:hover {
            transform: scale(1.05);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-600), var(--primary-800));
            color: white;
            padding: var(--space-16) var(--space-4);
            text-align: center;
            position: relative;
            overflow: hidden;
            border-radius: 0 0 var(--radius-3xl) var(--radius-3xl);
            margin-bottom: var(--space-12);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            z-index: 0;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            font-weight: 600;
            margin-bottom: var(--space-4);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero h1 {
            font-family: var(--font-display);
            font-size: var(--text-6xl);
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: var(--space-4);
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
            background: linear-gradient(to right, white, var(--gray-200));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: var(--text-2xl);
            line-height: 1.5;
            margin-bottom: var(--space-8);
            opacity: 0.95;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-8);
            margin-top: var(--space-6);
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat-number {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            background: linear-gradient(to right, white, var(--gray-300));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        .hero-stat-label {
            font-size: var(--text-lg);
            opacity: 0.9;
            font-weight: 500;
            margin-top: var(--space-1);
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: var(--space-8);
            margin-bottom: var(--space-12);
        }

        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--space-4);
        }

        .stat-card {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-2xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-primary);
        }

        .dark .stat-card {
            border-color: var(--gray-700);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-4);
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary-600);
            font-size: var(--text-2xl);
        }

        .dark .stat-icon {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary-400);
        }

        .stat-title {
            font-size: var(--text-sm);
            color: var(--text-tertiary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            color: var(--text-primary);
            line-height: 1;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: var(--text-sm);
            font-weight: 600;
            margin-top: var(--space-2);
        }

        .trend-up {
            color: var(--success-500);
        }

        .trend-down {
            color: var(--danger-500);
        }

        /* Progress Section */
        .progress-section {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-3xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .dark .progress-section {
            border-color: var(--gray-700);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: var(--space-8);
            flex-wrap: wrap;
            gap: var(--space-4);
        }

        .section-title {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            color: var(--text-primary);
            position: relative;
            padding-bottom: var(--space-2);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 64px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: var(--text-xl);
            margin-top: var(--space-1);
            max-width: 600px;
        }

        .progress-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }

        @media (max-width: 768px) {
            .progress-container {
                grid-template-columns: 1fr;
            }
        }

        .progress-card {
            background-color: var(--bg-surface);
            border-radius: var(--radius-2xl);
            padding: var(--space-6);
            border: 1px solid var(--border-color);
        }

        .dark .progress-card {
            border-color: var(--gray-700);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-4);
        }

        .progress-title {
            font-weight: 700;
            font-size: var(--text-xl);
            color: var(--text-primary);
        }

        .progress-value {
            font-family: var(--font-display);
            font-weight: 800;
            font-size: var(--text-3xl);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-bar-container {
            height: 12px;
            background-color: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: var(--space-4) 0;
        }

        .dark .progress-bar-container {
            background-color: var(--gray-700);
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            transition: width var(--transition-slow) cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shine 2s infinite;
        }

        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            font-size: var(--text-sm);
            color: var(--text-tertiary);
            margin-top: var(--space-2);
        }

        /* Mastery Levels */
        .mastery-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin-top: var(--space-6);
        }

        .mastery-level {
            text-align: center;
            padding: var(--space-4);
            border-radius: var(--radius-xl);
            transition: transform var(--transition-fast);
        }

        .mastery-level:hover {
            transform: scale(1.05);
        }

        .mastery-icon {
            font-size: var(--text-4xl);
            margin-bottom: var(--space-2);
        }

        .mastery-new .mastery-icon { color: var(--gray-500); }
        .mastery-learning .mastery-icon { color: var(--warning-500); }
        .mastery-mastered .mastery-icon { color: var(--success-500); }

        .mastery-title {
            font-weight: 700;
            font-size: var(--text-lg);
            margin-bottom: var(--space-1);
        }

        .mastery-count {
            font-family: var(--font-display);
            font-weight: 800;
            font-size: var(--text-2xl);
        }

        .mastery-new .mastery-count { color: var(--gray-500); }
        .mastery-learning .mastery-count { color: var(--warning-500); }
        .mastery-mastered .mastery-count { color: var(--success-500); }

        /* Categories Section */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .category-card {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .dark .category-card {
            border-color: var(--gray-700);
        }

        .category-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-300);
        }

        .dark .category-card:hover {
            border-color: var(--primary-700);
        }

        .category-header {
            padding: var(--space-6);
            text-align: center;
            position: relative;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.08));
        }

        .category-icon {
            font-size: var(--text-6xl);
            margin-bottom: var(--space-3);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: transform var(--transition-normal);
        }

        .category-card:hover .category-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .category-title {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .category-desc {
            color: var(--text-secondary);
            font-size: var(--text-sm);
            line-height: 1.5;
        }

        .category-footer {
            padding: var(--space-5) var(--space-6);
            border-top: 1px solid var(--border-color);
            background-color: var(--bg-surface);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .dark .category-footer {
            border-top-color: var(--gray-700);
            background-color: var(--gray-800);
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-3);
        }

        .category-stat {
            text-align: center;
        }

        .category-stat-value {
            font-family: var(--font-display);
            font-weight: 800;
            font-size: var(--text-2xl);
            color: var(--primary-600);
        }

        .dark .category-stat-value {
            color: var(--primary-400);
        }

        .category-stat-label {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .category-progress {
            height: 6px;
            background-color: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-top: var(--space-3);
        }

        .dark .category-progress {
            background-color: var(--gray-700);
        }

        .category-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            transition: width var(--transition-normal);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }

        .quick-actions {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-3xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        .dark .quick-actions {
            border-color: var(--gray-700);
        }

        .actions-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-3);
            margin-top: var(--space-4);
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-4);
            border-radius: var(--radius-xl);
            background-color: var(--bg-surface);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            text-decoration: none;
            transition: all var(--transition-normal);
            text-align: center;
            font-weight: 600;
        }

        .dark .action-btn {
            background-color: var(--gray-800);
            border-color: var(--gray-700);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            border-color: var(--primary-300);
            background-color: var(--primary-50);
            color: var(--primary-700);
        }

        .dark .action-btn:hover {
            border-color: var(--primary-700);
            background-color: rgba(99, 102, 241, 0.15);
            color: var(--primary-300);
        }

        .action-icon {
            font-size: var(--text-3xl);
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-xl);
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary-600);
        }

        .dark .action-icon {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary-400);
        }

        .action-title {
            font-size: var(--text-lg);
            font-weight: 700;
        }

        .streak-container {
            background: linear-gradient(135deg, var(--warning-500), var(--warning-600));
            border-radius: var(--radius-2xl);
            padding: var(--space-6);
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .streak-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: rotate 15s linear infinite;
            z-index: 0;
        }

        .streak-content {
            position: relative;
            z-index: 1;
        }

        .streak-title {
            font-size: var(--text-lg);
            opacity: 0.9;
            margin-bottom: var(--space-2);
        }

        .streak-count {
            font-family: var(--font-display);
            font-size: var(--text-5xl);
            font-weight: 800;
            margin-bottom: var(--space-2);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .streak-label {
            font-size: var(--text-xl);
            font-weight: 700;
            margin-bottom: var(--space-4);
        }

        .streak-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: var(--space-1);
            margin-top: var(--space-4);
        }

        .streak-day {
            aspect-ratio: 1;
            border-radius: var(--radius-md);
            background-color: rgba(255, 255, 255, 0.2);
        }

        .streak-day.active {
            background-color: rgba(255, 255, 255, 0.8);
        }

        /* Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: var(--space-4);
        }

        .achievement-card {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .dark .achievement-card {
            border-color: var(--gray-700);
        }

        .achievement-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary-300);
        }

        .dark .achievement-card:hover {
            border-color: var(--primary-700);
        }

        .achievement-icon {
            font-size: var(--text-4xl);
            margin-bottom: var(--space-2);
            transition: transform var(--transition-normal);
        }

        .achievement-card:hover .achievement-icon {
            transform: scale(1.2) rotate(10deg);
        }

        .achievement-locked .achievement-icon {
            color: var(--gray-400);
        }

        .achievement-unlocked .achievement-icon {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 8px rgba(99, 102, 241, 0.5));
        }

        .achievement-title {
            font-weight: 700;
            font-size: var(--text-sm);
            margin-bottom: var(--space-1);
            min-height: var(--space-5);
        }

        .achievement-requirement {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
        }

        .achievement-locked .achievement-requirement {
            color: var(--gray-400);
        }

        .achievement-progress {
            height: 4px;
            background-color: var(--gray-200);
            border-radius: var(--radius-full);
            margin-top: var(--space-2);
            overflow: hidden;
        }

        .dark .achievement-progress {
            background-color: var(--gray-700);
        }

        .achievement-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            transition: width var(--transition-normal);
        }

        /* Words Display */
        .words-section {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-3xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            display: none;
            animation: slide-up 0.4s ease;
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dark .words-section {
            border-color: var(--gray-700);
        }

        .words-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-8);
            flex-wrap: wrap;
            gap: var(--space-4);
        }

        .words-title {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .words-title i {
            font-size: var(--text-3xl);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .words-actions {
            display: flex;
            gap: var(--space-3);
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-xl);
            font-weight: 700;
            font-size: var(--text-base);
            cursor: pointer;
            transition: all var(--transition-normal);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity var(--transition-fast);
            z-index: -1;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn-primary {
            background-color: var(--primary-600);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-700);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background-color: var(--bg-surface);
            color: var(--primary-600);
            border: 1px solid var(--border-color);
        }

        .dark .btn-secondary {
            background-color: var(--gray-800);
            border-color: var(--gray-700);
        }

        .btn-secondary:hover {
            background-color: var(--primary-50);
            border-color: var(--primary-300);
            transform: translateY(-2px);
        }

        .dark .btn-secondary:hover {
            background-color: rgba(99, 102, 241, 0.15);
            border-color: var(--primary-700);
        }

        .btn-success {
            background-color: var(--success-500);
            color: white;
        }

        .btn-success:hover {
            background-color: var(--success-600);
            transform: translateY(-2px);
        }

        .btn-warning {
            background-color: var(--warning-500);
            color: white;
        }

        .btn-warning:hover {
            background-color: var(--warning-600);
            transform: translateY(-2px);
        }

        .words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-6);
        }

        .word-card {
            background-color: var(--bg-surface);
            border-radius: var(--radius-2xl);
            padding: var(--space-6);
            border: 2px solid transparent;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .word-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-200);
        }

        .dark .word-card:hover {
            border-color: var(--primary-800);
        }

        .word-card.mastered {
            border-color: var(--success-200);
            background-color: var(--success-50);
        }

        .dark .word-card.mastered {
            border-color: rgba(16, 185, 129, 0.3);
            background-color: rgba(16, 185, 129, 0.05);
        }

        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-4);
        }

        .english-word {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            color: var(--primary-600);
            line-height: 1.2;
        }

        .dark .english-word {
            color: var(--primary-400);
        }

        .word-difficulty {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: var(--radius-full);
            font-weight: 700;
            font-size: var(--text-xs);
        }

        .difficulty-easy {
            background-color: var(--success-100);
            color: var(--success-700);
        }

        .dark .difficulty-easy {
            background-color: rgba(16, 185, 129, 0.2);
            color: var(--success-400);
        }

        .difficulty-medium {
            background-color: var(--warning-100);
            color: var(--warning-800);
        }

        .dark .difficulty-medium {
            background-color: rgba(245, 158, 11, 0.2);
            color: var(--warning-300);
        }

        .difficulty-hard {
            background-color: var(--danger-100);
            color: var(--danger-800);
        }

        .dark .difficulty-hard {
            background-color: rgba(239, 68, 68, 0.2);
            color: var(--danger-300);
        }

        .arabic-word {
            font-size: var(--text-2xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-3);
            direction: rtl;
            text-align: right;
        }

        .pronunciation {
            font-family: var(--font-mono);
            font-size: var(--text-lg);
            color: var(--text-tertiary);
            margin-bottom: var(--space-4);
            font-style: italic;
            letter-spacing: 0.5px;
        }

        .word-example {
            font-size: var(--text-base);
            color: var(--text-secondary);
            font-style: italic;
            padding: var(--space-3);
            background-color: var(--gray-50);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-5);
            position: relative;
        }

        .dark .word-example {
            background-color: var(--gray-800);
        }

        .word-example::before {
            content: '"';
            position: absolute;
            top: -12px;
            left: 4px;
            font-size: 2rem;
            color: var(--primary-300);
            opacity: 0.3;
            font-family: var(--font-serif, serif);
        }

        .word-actions {
            display: flex;
            justify-content: center;
            gap: var(--space-3);
        }

        .word-btn {
            width: 50px;
            height: 50px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: all var(--transition-normal);
            font-size: var(--text-xl);
            box-shadow: var(--shadow-sm);
        }

        .word-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: var(--shadow-md);
        }

        .word-btn:active {
            transform: scale(0.95);
        }

        .word-btn.speak {
            background: var(--gradient-primary);
            color: white;
        }

        .word-btn.learn {
            background: var(--gradient-success);
            color: white;
        }

        .word-btn.quiz {
            background: var(--gradient-warning);
            color: white;
        }

        /* Quiz Section */
        .quiz-section {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-3xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            display: none;
            animation: slide-up 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .dark .quiz-section {
            border-color: var(--gray-700);
        }

        .quiz-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }

        .quiz-title {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            margin-bottom: var(--space-2);
            background: linear-gradient(135deg, var(--primary-600), var(--warning-500));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .quiz-subtitle {
            color: var(--text-secondary);
            font-size: var(--text-xl);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .quiz-progress-container {
            max-width: 600px;
            margin: var(--space-6) auto;
        }

        .quiz-progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-2);
            font-size: var(--text-sm);
            color: var(--text-tertiary);
        }

        .quiz-progress-bar-container {
            height: 10px;
            background-color: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
        }

        .dark .quiz-progress-bar-container {
            background-color: var(--gray-700);
        }

        .quiz-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-500), var(--warning-500));
            border-radius: var(--radius-full);
            transition: width var(--transition-normal);
        }

        .quiz-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-question-container {
            background-color: var(--bg-surface);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            margin-bottom: var(--space-8);
            border: 1px solid var(--border-color);
            text-align: center;
            box-shadow: var(--shadow-md);
        }

        .dark .quiz-question-container {
            border-color: var(--gray-700);
            background-color: var(--gray-800);
        }

        .quiz-question {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--space-6);
            line-height: 1.4;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-4);
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-option {
            background-color: var(--bg-elevated);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-5);
            cursor: pointer;
            transition: all var(--transition-normal);
            text-align: center;
            font-size: var(--text-xl);
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .dark .quiz-option {
            border-color: var(--gray-700);
            background-color: var(--gray-800);
        }

        .quiz-option:hover {
            border-color: var(--primary-300);
            transform: translateY(-2px);
        }

        .dark .quiz-option:hover {
            border-color: var(--primary-700);
        }

        .quiz-option.selected {
            border-color: var(--primary-500);
            background-color: var(--primary-50);
        }

        .dark .quiz-option.selected {
            background-color: rgba(99, 102, 241, 0.15);
        }

        .quiz-option.correct {
            border-color: var(--success-500);
            background-color: var(--success-50);
        }

        .dark .quiz-option.correct {
            background-color: rgba(16, 185, 129, 0.15);
        }

        .quiz-option.incorrect {
            border-color: var(--danger-500);
            background-color: var(--danger-50);
        }

        .dark .quiz-option.incorrect {
            background-color: rgba(239, 68, 68, 0.15);
        }

        .quiz-feedback {
            padding: var(--space-5);
            border-radius: var(--radius-xl);
            margin: var(--space-6) 0;
            text-align: center;
            font-weight: 600;
            font-size: var(--text-xl);
            display: none;
        }

        .feedback-correct {
            background-color: var(--success-50);
            color: var(--success-700);
            border: 1px solid var(--success-200);
        }

        .dark .feedback-correct {
            background-color: rgba(16, 185, 129, 0.15);
            border-color: var(--success-800);
            color: var(--success-300);
        }

        .feedback-incorrect {
            background-color: var(--danger-50);
            color: var(--danger-700);
            border: 1px solid var(--danger-200);
        }

        .dark .feedback-incorrect {
            background-color: rgba(239, 68, 68, 0.15);
            border-color: var(--danger-800);
            color: var(--danger-300);
        }

        .quiz-controls {
            display: flex;
            justify-content: center;
            gap: var(--space-4);
            margin-top: var(--space-6);
            flex-wrap: wrap;
        }

        .quiz-result {
            text-align: center;
            padding: var(--space-8);
            display: none;
        }

        .result-score {
            font-family: var(--font-display);
            font-size: var(--text-8xl);
            font-weight: 800;
            background: linear-gradient(135deg, var(--warning-500), var(--primary-500));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: var(--space-4);
            text-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
        }

        .result-message {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            margin-bottom: var(--space-6);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-8);
            margin: var(--space-8) 0;
            flex-wrap: wrap;
        }

        .result-stat {
            text-align: center;
            min-width: 150px;
        }

        .result-stat-value {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            color: var(--primary-600);
            margin-bottom: var(--space-2);
        }

        .dark .result-stat-value {
            color: var(--primary-400);
        }

        .result-stat-label {
            font-size: var(--text-lg);
            color: var(--text-secondary);
        }

        /* Footer */
        footer {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-3xl) var(--radius-3xl) 0 0;
            padding: var(--space-10) var(--space-4) var(--space-6);
            margin-top: var(--space-12);
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.05);
        }

        .dark footer {
            border-top-color: var(--gray-700);
            background-color: var(--gray-800);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-8);
        }

        .footer-column h3 {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 800;
            margin-bottom: var(--space-4);
            position: relative;
            padding-bottom: var(--space-2);
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
        }

        .footer-links {
            list-style: none;
        }

        .footer-link {
            display: block;
            padding: var(--space-2) 0;
            color: var(--text-secondary);
            text-decoration: none;
            transition: color var(--transition-fast);
            font-size: var(--text-base);
        }

        .footer-link:hover {
            color: var(--primary-600);
        }

        .dark .footer-link:hover {
            color: var(--primary-400);
        }

        .footer-bottom {
            text-align: center;
            padding-top: var(--space-8);
            margin-top: var(--space-8);
            border-top: 1px solid var(--border-color);
            color: var(--text-tertiary);
            font-size: var(--text-sm);
        }

        .dark .footer-bottom {
            border-top-color: var(--gray-700);
        }

        .footer-logo {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-4);
            display: inline-block;
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-50);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-normal);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--bg-elevated);
            border-radius: var(--radius-3xl);
            width: 95%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            transform: translateY(20px);
            transition: transform var(--transition-normal);
            position: relative;
            padding: var(--space-8);
        }

        .dark .modal-content {
            border-color: var(--gray-700);
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-close {
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-surface);
            color: var(--text-secondary);
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background-color: var(--gray-200);
            color: var(--danger-500);
        }

        .dark .modal-close:hover {
            background-color: var(--gray-700);
            color: var(--danger-400);
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 800;
            margin-bottom: var(--space-6);
            text-align: center;
            position: relative;
            padding-bottom: var(--space-4);
        }

        .modal-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
        }

        .form-group {
            margin-bottom: var(--space-6);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-2);
            font-weight: 600;
            font-size: var(--text-lg);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            background-color: var(--bg-surface);
            color: var(--text-primary);
            font-family: var(--font-sans);
            font-size: var(--text-lg);
            transition: border-color var(--transition-fast);
        }

        .dark .form-input,
        .dark .form-textarea,
        .dark .form-select {
            background-color: var(--gray-800);
            border-color: var(--gray-700);
            color: var(--text-primary);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .modal-buttons {
            display: flex;
            gap: var(--space-4);
            justify-content: center;
            margin-top: var(--space-6);
            flex-wrap: wrap;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            :root {
                --space-16: 4rem;
                --space-12: 2.5rem;
            }
            
            .hero {
                padding: var(--space-12) var(--space-4);
            }
            
            .hero h1 {
                font-size: var(--text-5xl);
            }
            
            .hero p {
                font-size: var(--text-xl);
            }
            
            .dashboard {
                gap: var(--space-6);
            }
            
            .progress-section,
            .words-section,
            .quiz-section {
                padding: var(--space-6);
            }
            
            .section-title {
                font-size: var(--text-3xl);
            }
        }

        @media (max-width: 900px) {
            .header-container {
                flex-direction: column;
                gap: var(--space-4);
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero-stats {
                gap: var(--space-6);
            }
            
            .hero-stat-number {
                font-size: var(--text-4xl);
            }
            
            .progress-container {
                grid-template-columns: 1fr;
            }
            
            .words-grid,
            .categories-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .footer-content {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 600px) {
            :root {
                --space-8: 1.75rem;
                --space-6: 1.5rem;
                --space-5: 1.25rem;
                --space-4: 1rem;
            }
            
            html {
                font-size: 15px;
            }
            
            .hero {
                padding: var(--space-10) var(--space-3);
            }
            
            .hero h1 {
                font-size: var(--text-4xl);
            }
            
            .hero p {
                font-size: var(--text-lg);
            }
            
            .hero-stats {
                flex-direction: column;
                align-items: center;
            }
            
            .section-title {
                font-size: var(--text-2xl);
            }
            
            .section-subtitle {
                font-size: var(--text-base);
            }
            
            .stat-value {
                font-size: var(--text-3xl);
            }
            
            .progress-value {
                font-size: var(--text-2xl);
            }
            
            .category-title {
                font-size: var(--text-xl);
            }
            
            .words-title {
                font-size: var(--text-3xl);
            }
            
            .english-word {
                font-size: var(--text-2xl);
            }
            
            .arabic-word {
                font-size: var(--text-xl);
            }
            
            .quiz-question {
                font-size: var(--text-2xl);
            }
            
            .quiz-option {
                padding: var(--space-4);
                font-size: var(--text-lg);
            }
            
            .result-score {
                font-size: var(--text-6xl);
            }
            
            .result-message {
                font-size: var(--text-2xl);
            }
            
            .nav-link span {
                display: none;
            }
            
            .btn {
                padding: var(--space-3) var(--space-4);
                font-size: var(--text-sm);
            }
            
            .word-btn {
                width: 44px;
                height: 44px;
                font-size: var(--text-lg);
            }
            
            .modal-content {
                padding: var(--space-6);
            }
            
            .modal-title {
                font-size: var(--text-2xl);
            }
            
            .footer-column h3 {
                font-size: var(--text-xl);
            }
        }

        /* Animations */
        @keyframes confetti {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background-color: var(--primary-500);
            top: -20px;
            animation: confetti 5s forwards;
            z-index: var(--z-50);
            border-radius: 2px;
            opacity: 0.9;
        }

        .confetti:nth-child(2n) {
            background-color: var(--success-500);
        }
        
        .confetti:nth-child(3n) {
            background-color: var(--warning-500);
        }
        
        .confetti:nth-child(4n) {
            background-color: var(--danger-500);
        }
        
        .confetti:nth-child(5n) {
            background-color: var(--primary-300);
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Focus visible */
        :focus-visible {
            outline: 2px solid var(--primary-500);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Confetti container -->
    <div id="confetti-container"></div>

    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">
                <i class="fas fa-graduation-cap logo-icon"></i>
                <span class="logo-text">ENGLISH MASTER PRO</span>
            </a>
            <ul class="nav-menu">
                <li class="nav-item"><a href="#categories" class="nav-link active"><i class="fas fa-book"></i> <span>Categories</span></a></li>
                <li class="nav-item"><a href="#progress" class="nav-link"><i class="fas fa-chart-line"></i> <span>Progress</span></a></li>
                <li class="nav-item"><a href="#achievements" class="nav-link"><i class="fas fa-medal"></i> <span>Achievements</span></a></li>
                <li class="nav-item"><a href="#" class="nav-link" onclick="startQuizMode(); return false;"><i class="fas fa-question-circle"></i> <span>Quiz</span></a></li>
            </ul>
            <div class="header-actions">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-menu">
                    <div class="user-avatar" id="user-avatar"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-badge">
                <i class="fas fa-flag-uk"></i> British English Pronunciation
            </div>
            <h1>Master English with AI-Powered Learning</h1>
            <p>The most advanced gamified platform for learning English vocabulary with British pronunciation, smart testing, and personalized progress tracking. Perfect for IELTS preparation!</p>
            
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-number" id="heroTotalWords">350+</div>
                    <div class="hero-stat-label">Words to Learn</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number" id="heroCategories">10</div>
                    <div class="hero-stat-label">Categories</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number"></div>
                    <div class="hero-stat-label">Smart Testing</div>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Dashboard Layout -->
        <div class="dashboard">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div class="stat-title">Total Words</div>
                        </div>
                        <div class="stat-value" id="totalWords">0</div>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> <span>+12 this week</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-title">Mastered</div>
                        </div>
                        <div class="stat-value" id="learnedWords">0</div>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> <span>+8 this week</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="stat-title">Day Streak</div>
                        </div>
                        <div class="stat-value" id="streakDays">0</div>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> <span>+1 today</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-title">Total XP</div>
                        </div>
                        <div class="stat-value" id="totalXP">0</div>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> <span>+240 today</span>
                        </div>
                    </div>
                </div>

                <!-- Progress Section -->
                <section class="progress-section" id="progress">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">Your Learning Journey</h2>
                            <p class="section-subtitle">Track your progress and master English vocabulary with our AI-powered spaced repetition system</p>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-card">
                            <div class="progress-header">
                                <div class="progress-title">Overall Progress</div>
                                <div class="progress-value" id="progressPercentage">0%</div>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="progressBar"></div>
                            </div>
                            <div class="progress-labels">
                                <span>Beginner</span>
                                <span>Expert</span>
                            </div>
                        </div>
                        
                        <div class="progress-card">
                            <div class="progress-header">
                                <div class="progress-title">Retention Rate</div>
                                <div class="progress-value" id="avgRetention">0%</div>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="retentionBar" style="width: 0%; background: var(--gradient-success);"></div>
                            </div>
                            <div class="progress-labels">
                                <span>Low</span>
                                <span>Excellent</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mastery-container">
                        <div class="mastery-level mastery-new">
                            <div class="mastery-icon">
                                <i class="far fa-circle"></i>
                            </div>
                            <div class="mastery-title">New Words</div>
                            <div class="mastery-count" id="masteryNew">0</div>
                        </div>
                        <div class="mastery-level mastery-learning">
                            <div class="mastery-icon">
                                <i class="fas fa-spinner"></i>
                            </div>
                            <div class="mastery-title">Learning</div>
                            <div class="mastery-count" id="masteryLearning">0</div>
                        </div>
                        <div class="mastery-level mastery-mastered">
                            <div class="mastery-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="mastery-title">Mastered</div>
                            <div class="mastery-count" id="masteryMastered">0</div>
                        </div>
                    </div>
                </section>

                <!-- Categories Section -->
                <section class="categories-section" id="categories">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">Learning Categories</h2>
                            <p class="section-subtitle">Explore vocabulary organized by themes to build your English skills systematically</p>
                        </div>
                        <button class="btn btn-primary" onclick="openAddCategoryModal()">
                            <i class="fas fa-plus"></i> New Category
                        </button>
                    </div>
                    
                    <div class="categories-grid" id="categoriesGrid">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Words Section (hidden by default) -->
                <section class="words-section" id="wordsSection">
                    <div class="words-header">
                        <h2 class="words-title" id="currentCategoryTitle">
                            <i class="fas fa-paw"></i> Animals
                        </h2>
                        <div class="words-actions">
                            <button class="btn btn-secondary" onclick="goBack()">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <button class="btn btn-primary" onclick="openAddWordModal()">
                                <i class="fas fa-plus"></i> Add Word
                            </button>
                            <button class="btn btn-warning" onclick="startCategoryQuiz()">
                                <i class="fas fa-question-circle"></i> Quiz
                            </button>
                        </div>
                    </div>
                    <div class="words-grid" id="wordsGrid">
                        <!-- Words will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Quiz Section (hidden by default) -->
                <section class="quiz-section" id="quizSection">
                    <div class="quiz-header">
                        <h2 class="quiz-title">Smart Vocabulary Quiz</h2>
                        <p class="quiz-subtitle" id="quizSubtitle">Test your knowledge with adaptive questions that get smarter as you learn!</p>
                        
                        <div class="quiz-progress-container">
                            <div class="quiz-progress-label">
                                <span>Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span></span>
                                <span id="quizScore">Score: 0</span>
                            </div>
                            <div class="quiz-progress-bar-container">
                                <div class="quiz-progress-bar" id="quizProgressBar"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quiz-content">
                        <div class="quiz-question-container">
                            <div class="quiz-question" id="quizQuestion">What is the British pronunciation of this word?</div>
                            
                            <div class="quiz-options" id="quizOptions">
                                <!-- Options will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="quizFeedback">
                            Correct! The pronunciation is /km.pju.tr/
                        </div>
                        
                        <div class="quiz-controls">
                            <button class="btn btn-secondary" id="quizSkipBtn" onclick="skipQuestion()">
                                <i class="fas fa-step-forward"></i> Skip Question
                            </button>
                            <button class="btn btn-primary" id="quizNextBtn" onclick="nextQuestion()" style="display: none;">
                                <i class="fas fa-arrow-right"></i> Next Question
                            </button>
                            <button class="btn btn-success" id="quizSubmitBtn" onclick="submitAnswer()" style="display: none;">
                                <i class="fas fa-check"></i> Submit Answer
                            </button>
                        </div>
                    </div>
                    
                    <div class="quiz-result" id="quizResult">
                        <div class="result-score" id="resultScore">92%</div>
                        <div class="result-message" id="resultMessage">Excellent Performance!</div>
                        <p style="font-size: var(--text-xl); max-width: 600px; margin: 0 auto var(--space-6); color: var(--text-secondary);">
                            You've mastered these words! Keep up the great work and continue expanding your vocabulary.
                        </p>
                        
                        <div class="result-stats">
                            <div class="result-stat">
                                <div class="result-stat-value">240</div>
                                <div class="result-stat-label">XP Earned</div>
                            </div>
                            <div class="result-stat">
                                <div class="result-stat-value">9/10</div>
                                <div class="result-stat-label">Correct Answers</div>
                            </div>
                            <div class="result-stat">
                                <div class="result-stat-value">3</div>
                                <div class="result-stat-label">New Words</div>
                            </div>
                        </div>
                        
                        <div class="quiz-controls">
                            <button class="btn btn-secondary" onclick="resetQuiz()">
                                <i class="fas fa-redo"></i> Try Again
                            </button>
                            <button class="btn btn-primary" onclick="closeQuiz()">
                                <i class="fas fa-home"></i> Back to Learning
                            </button>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3 class="section-title" style="font-size: var(--text-2xl); margin-bottom: var(--space-4);">Quick Actions</h3>
                    <div class="actions-grid">
                        <a href="#" class="action-btn" onclick="startDailyChallenge(); return false;">
                            <div class="action-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="action-title">Daily Challenge</div>
                        </a>
                        <a href="#" class="action-btn" onclick="openStudyMode(); return false;">
                            <div class="action-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="action-title">Focus Mode</div>
                        </a>
                        <a href="#" class="action-btn" onclick="startQuizMode(); return false;">
                            <div class="action-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div class="action-title">Smart Quiz</div>
                        </a>
                        <a href="#" class="action-btn" onclick="viewAchievements(); return false;">
                            <div class="action-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="action-title">Achievements</div>
                        </a>
                    </div>
                </div>
                
                <!-- Streak Calendar -->
                <div class="streak-container">
                    <div class="streak-content">
                        <div class="streak-title">Current Learning Streak</div>
                        <div class="streak-count" id="streakCount">0</div>
                        <div class="streak-label">Days</div>
                        <p style="opacity: 0.9; margin-bottom: var(--space-4);">Keep studying daily to maintain your streak!</p>
                        
                        <div class="streak-calendar">
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day"></div>
                            <div class="streak-day active"></div>
                            <div class="streak-day active"></div>
                            <div class="streak-day active"></div>
                            <div class="streak-day active"></div>
                            <div class="streak-day active"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Achievements -->
                <div class="progress-section" id="achievements" style="padding: var(--space-6);">
                    <div class="section-header" style="margin-bottom: var(--space-6);">
                        <h3 class="section-title" style="font-size: var(--text-2xl);">Achievements</h3>
                    </div>
                    <div class="achievements-grid">
                        <div class="achievement-card achievement-unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="achievement-title">First Steps</div>
                            <div class="achievement-requirement">Learn 5 words</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div class="achievement-card achievement-unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="achievement-title">Vocabulary Builder</div>
                            <div class="achievement-requirement">Learn 25 words</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div class="achievement-card achievement-locked">
                            <div class="achievement-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="achievement-title">Word Master</div>
                            <div class="achievement-requirement">Learn 100 words</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar" style="width: 35%;"></div>
                            </div>
                        </div>
                        <div class="achievement-card achievement-locked">
                            <div class="achievement-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="achievement-title">Streak Master</div>
                            <div class="achievement-requirement">7 day streak</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar" style="width: 42%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <div class="footer-logo">ENGLISH MASTER PRO</div>
                <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: var(--space-4);">
                    The ultimate AI-powered platform for mastering English with British pronunciation. Perfect for IELTS preparation and vocabulary building.
                </p>
                <div style="display: flex; gap: var(--space-3);">
                    <a href="#" class="footer-link" aria-label="Facebook">
                        <i class="fab fa-facebook-f" style="font-size: var(--text-xl);"></i>
                    </a>
                    <a href="#" class="footer-link" aria-label="Twitter">
                        <i class="fab fa-twitter" style="font-size: var(--text-xl);"></i>
                    </a>
                    <a href="#" class="footer-link" aria-label="Instagram">
                        <i class="fab fa-instagram" style="font-size: var(--text-xl);"></i>
                    </a>
                    <a href="#" class="footer-link" aria-label="YouTube">
                        <i class="fab fa-youtube" style="font-size: var(--text-xl);"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Learning Resources</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">British Pronunciation Guide</a></li>
                    <li><a href="#" class="footer-link">IELTS Preparation Tips</a></li>
                    <li><a href="#" class="footer-link">Vocabulary Building Strategies</a></li>
                    <li><a href="#" class="footer-link">Grammar Reference</a></li>
                    <li><a href="#" class="footer-link">Common Mistakes to Avoid</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Platform Features</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">Spaced Repetition System</a></li>
                    <li><a href="#" class="footer-link">Smart Quizzes</a></li>
                    <li><a href="#" class="footer-link">Progress Tracking</a></li>
                    <li><a href="#" class="footer-link">Achievement System</a></li>
                    <li><a href="#" class="footer-link">Dark Mode</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Study Tips</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">Study 15-20 minutes daily</a></li>
                    <li><a href="#" class="footer-link">Review learned words regularly</a></li>
                    <li><a href="#" class="footer-link">Practice pronunciation out loud</a></li>
                    <li><a href="#" class="footer-link">Use new words in sentences</a></li>
                    <li><a href="#" class="footer-link">Take quizzes to reinforce learning</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2026 English Master Pro. All rights reserved. Designed for IELTS Success! </p>
            <p style="margin-top: var(--space-2); font-size: var(--text-xs); color: var(--text-tertiary);">
                This platform uses British English pronunciation (RP - Received Pronunciation) as standard.
            </p>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Add Category Modal -->
    <div class="modal" id="addCategoryModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAddCategoryModal()">&times;</button>
            <h3 class="modal-title">Create New Learning Category</h3>
            <form id="addCategoryForm">
                <div class="form-group">
                    <label class="form-label" for="categoryName">
                        <i class="fas fa-tag"></i> Category Name
                    </label>
                    <input type="text" id="categoryName" class="form-input" placeholder="e.g., Technology, Business, Medical..." required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="categoryIcon">
                        <i class="fas fa-icons"></i> Category Icon (Emoji)
                    </label>
                    <input type="text" id="categoryIcon" class="form-input" placeholder="e.g.,     " required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="categoryColor">
                        <i class="fas fa-palette"></i> Theme Color
                    </label>
                    <select id="categoryColor" class="form-select">
                        <option value="#6366f1"> Purple Blue</option>
                        <option value="#10b981"> Emerald Green</option>
                        <option value="#f59e0b"> Amber Orange</option>
                        <option value="#ef4444"> Red</option>
                        <option value="#3b82f6"> Blue</option>
                        <option value="#ec4899"> Pink</option>
                        <option value="#8b5cf6"> Violet</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeAddCategoryModal()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus-circle"></i> Create Category
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Word Modal -->
    <div class="modal" id="addWordModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAddWordModal()">&times;</button>
            <h3 class="modal-title">Add New Vocabulary Word</h3>
            <form id="addWordForm">
                <div class="form-group">
                    <label class="form-label" for="wordEnglish">
                        <i class="fas fa-language"></i> English Word
                    </label>
                    <input type="text" id="wordEnglish" class="form-input" placeholder="e.g., Computer, Beautiful, Innovation" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="wordArabic">
                        <i class="fas fa-globe"></i> Arabic Translation
                    </label>
                    <input type="text" id="wordArabic" class="form-input" placeholder="e.g., , , " required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="wordPronunciation">
                        <i class="fas fa-volume-up"></i> Pronunciation (UK)
                    </label>
                    <input type="text" id="wordPronunciation" class="form-input" placeholder="e.g., /kmpju.tr/, /bju.t.fl/" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="wordDifficulty">
                        <i class="fas fa-chart-line"></i> Difficulty Level
                    </label>
                    <select id="wordDifficulty" class="form-select">
                        <option value="easy"> Easy - Basic vocabulary</option>
                        <option value="medium" selected> Medium - Intermediate level</option>
                        <option value="hard"> Hard - Advanced vocabulary</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="wordExample">
                        <i class="fas fa-quote-right"></i> Example Sentence
                    </label>
                    <textarea id="wordExample" class="form-textarea" placeholder="e.g., The computer is very fast and efficient."></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeAddWordModal()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Word
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Comprehensive Vocabulary Data with Advanced Features
        const categoriesData = {
            animals: {
                name: "Animals",
                icon: "",
                color: "#6366f1",
                description: "Learn animal names and characteristics",
                words: [
                    { en: "Lion", ar: "", pronunciation: "/la.n/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The lion is known as the king of the jungle." },
                    { en: "Elephant", ar: "", pronunciation: "/el..fnt/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Elephants are the largest land animals on Earth." },
                    { en: "Giraffe", ar: "", pronunciation: "/drf/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The giraffe has the longest neck of any animal." },
                    { en: "Dolphin", ar: "", pronunciation: "/dl.fn/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Dolphins are highly intelligent marine mammals." },
                    { en: "Kangaroo", ar: "", pronunciation: "/k.ru/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Kangaroos are marsupials native to Australia." }
                ]
            },
            nature: {
                name: "Nature",
                icon: "",
                color: "#10b981",
                description: "Explore the natural world vocabulary",
                words: [
                    { en: "Mountain", ar: "", pronunciation: "/man.tn/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Mount Everest is the highest mountain in the world." },
                    { en: "Ocean", ar: "", pronunciation: "/.n/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The Pacific Ocean is the largest ocean on Earth." },
                    { en: "Forest", ar: "", pronunciation: "/fr.st/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The Amazon rainforest produces 20% of the world's oxygen." },
                    { en: "Desert", ar: "", pronunciation: "/dez.t/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The Sahara Desert is the largest hot desert in the world." },
                    { en: "Waterfall", ar: "", pronunciation: "/w.t.fl/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Niagara Falls is one of the most famous waterfalls in the world." }
                ]
            },
            technology: {
                name: "Technology",
                icon: "",
                color: "#3b82f6",
                description: "Modern technology vocabulary",
                words: [
                    { en: "Computer", ar: "", pronunciation: "/kmpju.tr/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Computers have revolutionized the way we work and communicate." },
                    { en: "Smartphone", ar: " ", pronunciation: "/smt.fn/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Smartphones have become essential tools in modern life." },
                    { en: "Artificial Intelligence", ar: " ", pronunciation: "/.tf.l ntel..dns/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Artificial Intelligence is transforming industries worldwide." },
                    { en: "Blockchain", ar: " ", pronunciation: "/blk.ten/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Blockchain technology provides secure and transparent transactions." },
                    { en: "Virtual Reality", ar: " ", pronunciation: "/v.tu.l ril..ti/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Virtual Reality creates immersive digital experiences." }
                ]
            },
            food: {
                name: "Food & Drinks",
                icon: "",
                color: "#f59e0b",
                description: "Culinary vocabulary",
                words: [
                    { en: "Pizza", ar: "", pronunciation: "/pit.s/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Pizza originated in Italy and is now popular worldwide." },
                    { en: "Chocolate", ar: "", pronunciation: "/tk.lt/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Dark chocolate contains antioxidants that are good for your health." },
                    { en: "Coffee", ar: "", pronunciation: "/kf.i/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Coffee is one of the most traded commodities in the world." },
                    { en: "Sushi", ar: "", pronunciation: "/su.i/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Sushi is a traditional Japanese dish made with vinegared rice." },
                    { en: "Croissant", ar: "", pronunciation: "/krs/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The croissant is a buttery, flaky pastry that originated in Austria." }
                ]
            },
            business: {
                name: "Business",
                icon: "",
                color: "#8b5cf6",
                description: "Professional business vocabulary",
                words: [
                    { en: "Entrepreneur", ar: " ", pronunciation: "/n.tr.prnr/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "An entrepreneur is someone who starts and runs their own business." },
                    { en: "Innovation", ar: "", pronunciation: "/n.ve.n/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Innovation is the key to staying competitive in today's market." },
                    { en: "Strategy", ar: "", pronunciation: "/strt..di/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "A good business strategy helps companies achieve their long-term goals." },
                    { en: "Marketing", ar: "", pronunciation: "/m.k.t/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Digital marketing has become essential for modern businesses." },
                    { en: "Negotiation", ar: "", pronunciation: "/n.ie.n/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Successful negotiation requires preparation and strong communication skills." }
                ]
            },
            travel: {
                name: "Travel & Tourism",
                icon: "",
                color: "#ec4899",
                description: "Travel-related vocabulary",
                words: [
                    { en: "Passport", ar: " ", pronunciation: "/ps.pt/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Always check your passport expiration date before booking international travel." },
                    { en: "Destination", ar: "", pronunciation: "/des.tne.n/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Paris is a popular tourist destination known for its art and fashion." },
                    { en: "Accommodation", ar: " ch ", pronunciation: "/km.de.n/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Finding affordable accommodation can be challenging in major cities." },
                    { en: "Itinerary", ar: " ", pronunciation: "/atn.r.r.i/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "A well-planned itinerary helps maximize your travel experience." },
                    { en: "Sightseeing", ar: " ", pronunciation: "/satsi./", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Sightseeing is one of the most enjoyable parts of any vacation." }
                ]
            },
            education: {
                name: "Education",
                icon: "",
                color: "#14b8a6",
                description: "Academic and educational terms",
                words: [
                    { en: "University", ar: "", pronunciation: "/ju.nv.s.ti/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Harvard University is one of the oldest institutions of higher education in the United States." },
                    { en: "Scholarship", ar: " ", pronunciation: "/skl..p/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "She earned a scholarship to study abroad based on her academic achievements." },
                    { en: "Curriculum", ar: " ", pronunciation: "/krk.j.lm/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The school updated its curriculum to include more technology-focused courses." },
                    { en: "Thesis", ar: "", pronunciation: "/i.ss/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Completing his doctoral thesis took him three years of research." },
                    { en: "Literacy", ar: "  ", pronunciation: "/lt.r..si/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Digital literacy has become as important as traditional reading and writing skills." }
                ]
            },
            health: {
                name: "Health & Wellness",
                icon: "",
                color: "#ef4444",
                description: "Health-related vocabulary",
                words: [
                    { en: "Nutrition", ar: "", pronunciation: "/njutr.n/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Good nutrition is essential for maintaining a healthy lifestyle." },
                    { en: "Meditation", ar: "", pronunciation: "/med.te.n/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Daily meditation can reduce stress and improve mental clarity." },
                    { en: "Hydration", ar: "", pronunciation: "/ha.dre.n/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Proper hydration is crucial for optimal physical and cognitive performance." },
                    { en: "Immunity", ar: "", pronunciation: "/mju.n.ti/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "A balanced diet helps strengthen your immune system." },
                    { en: "Wellness", ar: "", pronunciation: "/wel.ns/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Holistic wellness includes physical, mental, and emotional health." }
                ]
            },
            emotions: {
                name: "Emotions & Feelings",
                icon: "",
                color: "#f97316",
                description: "Vocabulary for expressing emotions",
                words: [
                    { en: "Joy", ar: "", pronunciation: "/d/", difficulty: "easy", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The birth of their child filled them with immense joy." },
                    { en: "Anxiety", ar: "", pronunciation: "/za..ti/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Public speaking causes anxiety for many people." },
                    { en: "Frustration", ar: "", pronunciation: "/frstre.n/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Technical difficulties led to frustration among the team members." },
                    { en: "Serenity", ar: "", pronunciation: "/sren..ti/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "She found serenity while walking through the peaceful forest." },
                    { en: "Empathy", ar: "", pronunciation: "/em.p.i/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Empathy allows us to understand and share the feelings of others." }
                ]
            },
            arts: {
                name: "Arts & Culture",
                icon: "",
                color: "#a855f7",
                description: "Artistic and cultural vocabulary",
                words: [
                    { en: "Masterpiece", ar: " ", pronunciation: "/m.st.pis/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The Mona Lisa is considered one of the greatest masterpieces in art history." },
                    { en: "Symphony", ar: "", pronunciation: "/sm.f.ni/", difficulty: "medium", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "Beethoven's Ninth Symphony is one of the most celebrated works in classical music." },
                    { en: "Renaissance", ar: "", pronunciation: "/ren..sns/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The Renaissance was a period of great cultural and artistic change in Europe." },
                    { en: "Choreography", ar: " ", pronunciation: "/kr.i.r.fi/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The choreography of the ballet was both complex and beautiful." },
                    { en: "Aesthetic", ar: "", pronunciation: "/eset.k/", difficulty: "hard", mastered: false, learningStage: "new", correctAnswers: 0, totalAttempts: 0, example: "The minimalist aesthetic of Japanese design emphasizes simplicity and natural materials." }
                ]
            }
        };

        // State Management
        let state = {
            currentCategory: null,
            userLevel: 1,
            totalXP: 0,
            streakDays: 3,
            wordsPerDay: 12,
            studyTime: 45,
            masteredWords: 0,
            learningWords: 8,
            newWords: 42,
            quiz: {
                currentQuestion: 0,
                totalQuestions: 10,
                score: 0,
                questions: [],
                active: false
            },
            darkMode: localStorage.getItem('darkMode') === 'true' || window.matchMedia('(prefers-color-scheme: dark)').matches
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            // Set dark mode
            if (state.darkMode) {
                document.documentElement.classList.add('dark');
                document.getElementById('theme-toggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Render initial UI
            renderCategories();
            updateStats();
            setupEventListeners();
            
            // Simulate some progress for demo
            simulateProgress();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Theme toggle
            document.getElementById('theme-toggle').addEventListener('click', toggleDarkMode);
            
            // Form submissions
            document.getElementById('addCategoryForm').addEventListener('submit', handleAddCategory);
            document.getElementById('addWordForm').addEventListener('submit', handleAddWord);
            
            // Quiz buttons
            document.getElementById('quizSubmitBtn').addEventListener('click', submitAnswer);
            document.getElementById('quizNextBtn').addEventListener('click', nextQuestion);
            document.getElementById('quizSkipBtn').addEventListener('click', skipQuestion);
        }

        // Toggle dark mode
        function toggleDarkMode() {
            state.darkMode = !state.darkMode;
            document.documentElement.classList.toggle('dark', state.darkMode);
            document.getElementById('theme-toggle').innerHTML = state.darkMode ? 
                '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            localStorage.setItem('darkMode', state.darkMode);
        }

        // Render categories grid
        function renderCategories() {
            const container = document.getElementById('categoriesGrid');
            container.innerHTML = '';
            
            Object.entries(categoriesData).forEach(([key, category]) => {
                const totalWords = category.words.length;
                const masteredWords = category.words.filter(w => w.mastered).length;
                const progress = totalWords > 0 ? (masteredWords / totalWords) * 100 : 0;
                
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                categoryCard.innerHTML = `
                    <div class="category-header">
                        <div class="category-icon">${category.icon}</div>
                        <h3 class="category-title">${category.name}</h3>
                        <p class="category-desc">${category.description}</p>
                    </div>
                    <div class="category-footer">
                        <div class="category-stats">
                            <div class="category-stat">
                                <div class="category-stat-value">${masteredWords}</div>
                                <div class="category-stat-label">Mastered</div>
                            </div>
                            <div class="category-stat">
                                <div class="category-stat-value">${totalWords}</div>
                                <div class="category-stat-label">Total</div>
                            </div>
                        </div>
                        <div class="category-progress">
                            <div class="category-progress-bar" style="width: ${progress}%; background: ${category.color};"></div>
                        </div>
                    </div>
                `;
                
                categoryCard.addEventListener('click', () => showWords(key));
                container.appendChild(categoryCard);
            });
        }

        // Show words for a category
        function showWords(categoryKey) {
            state.currentCategory = categoryKey;
            const category = categoriesData[categoryKey];
            
            // Update header
            document.getElementById('currentCategoryTitle').innerHTML = `
                <i class="fas fa-${getCategoryIcon(categoryKey)}"></i> ${category.name}
            `;
            
            // Show words section
            document.getElementById('wordsSection').style.display = 'block';
            document.getElementById('categories').scrollIntoView({ behavior: 'smooth' });
            
            // Render words
            renderWords();
        }

        // Get category icon for header
        function getCategoryIcon(categoryKey) {
            const icons = {
                animals: 'paw',
                nature: 'leaf',
                technology: 'laptop',
                food: 'utensils',
                business: 'briefcase',
                travel: 'plane',
                education: 'graduation-cap',
                health: 'heart',
                emotions: 'smile',
                arts: 'theater-masks'
            };
            return icons[categoryKey] || 'book';
        }

        // Render words grid
        function renderWords() {
            const container = document.getElementById('wordsGrid');
            container.innerHTML = '';
            
            if (!state.currentCategory) return;
            
            const category = categoriesData[state.currentCategory];
            
            category.words.forEach((word, index) => {
                const wordCard = document.createElement('div');
                wordCard.className = `word-card ${word.mastered ? 'mastered' : ''}`;
                wordCard.innerHTML = `
                    <div class="word-header">
                        <div class="english-word">${word.en}</div>
                        <div class="word-difficulty difficulty-${word.difficulty}">${word.difficulty === 'easy' ? 'E' : word.difficulty === 'medium' ? 'M' : 'H'}</div>
                    </div>
                    <div class="arabic-word">${word.ar}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="word-example">${word.example}</div>
                    <div class="word-actions">
                        <button class="word-btn speak" onclick="speakWord('${word.en.replace(/'/g, "\\'")}', event)">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button class="word-btn ${word.mastered ? 'learn' : 'quiz'}" onclick="toggleMastered(${index}, event)">
                            <i class="fas ${word.mastered ? 'fa-check' : 'fa-question-circle'}"></i>
                        </button>
                        <button class="word-btn ${word.mastered ? 'success' : 'primary'}" onclick="markAsMastered(${index}, event)">
                            <i class="fas fa-${word.mastered ? 'star' : 'star-half-alt'}"></i>
                        </button>
                    </div>
                `;
                container.appendChild(wordCard);
            });
        }

        // British pronunciation
        function speakWord(word, event) {
            if (event) event.stopPropagation();
            
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-GB';
            utterance.rate = 0.95;
            utterance.pitch = 1.1;
            
            // Find British voice
            const voices = speechSynthesis.getVoices();
            const britishVoice = voices.find(voice => 
                voice.lang === 'en-GB' || voice.name.includes('UK') || voice.name.includes('British')
            );
            
            if (britishVoice) {
                utterance.voice = britishVoice;
            }
            
            speechSynthesis.speak(utterance);
            
            // Visual feedback
            if (event) {
                const btn = event.target.closest('.word-btn');
                if (btn) {
                    btn.classList.add('celebrate');
                    setTimeout(() => btn.classList.remove('celebrate'), 300);
                }
            }
            
            // Add XP
            addXP(5);
            createConfetti(5);
        }

        // Toggle mastered status
        function toggleMastered(index, event) {
            if (!state.currentCategory) return;
            
            const category = categoriesData[state.currentCategory];
            const word = category.words[index];
            
            if (word.mastered) {
                word.mastered = false;
                word.learningStage = 'learning';
                state.masteredWords--;
                state.learningWords++;
            } else {
                word.mastered = true;
                word.learningStage = 'mastered';
                state.masteredWords++;
                state.learningWords--;
                state.newWords--;
                addXP(25);
                createConfetti(15);
            }
            
            renderWords();
            updateStats();
            saveProgress();
        }

        // Mark as mastered directly
        function markAsMastered(index, event) {
            if (!state.currentCategory) return;
            
            const category = categoriesData[state.currentCategory];
            const word = category.words[index];
            
            if (!word.mastered) {
                word.mastered = true;
                word.learningStage = 'mastered';
                state.masteredWords++;
                state.learningWords--;
                state.newWords--;
                addXP(30);
                createConfetti(20);
                
                renderWords();
                updateStats();
                saveProgress();
                
                // Show celebration
                setTimeout(() => {
                    alert(` Excellent! "${word.en}" has been mastered!`);
                }, 300);
            }
        }

        // Go back to categories
        function goBack() {
            document.getElementById('wordsSection').style.display = 'none';
            window.scrollTo({ top: document.getElementById('categories').offsetTop - 80, behavior: 'smooth' });
        }

        // Update statistics
        function updateStats() {
            // Calculate totals
            let totalWords = 0;
            let masteredWords = 0;
            
            Object.values(categoriesData).forEach(category => {
                totalWords += category.words.length;
                masteredWords += category.words.filter(w => w.mastered).length;
            });
            
            // Update UI
            document.getElementById('totalWords').textContent = totalWords;
            document.getElementById('learnedWords').textContent = masteredWords;
            document.getElementById('streakDays').textContent = state.streakDays;
            document.getElementById('totalXP').textContent = state.totalXP;
            document.getElementById('progressPercentage').textContent = totalWords > 0 ? Math.round((masteredWords / totalWords) * 100) : 0;
            document.getElementById('progressBar').style.width = totalWords > 0 ? `${(masteredWords / totalWords) * 100}%` : '0%';
            document.getElementById('avgRetention').textContent = totalWords > 0 ? Math.round((masteredWords / totalWords) * 100) : 0;
            document.getElementById('retentionBar').style.width = totalWords > 0 ? `${(masteredWords / totalWords) * 100}%` : '0%';
            document.getElementById('masteryNew').textContent = state.newWords;
            document.getElementById('masteryLearning').textContent = state.learningWords;
            document.getElementById('masteryMastered').textContent = state.masteredWords;
            document.getElementById('streakCount').textContent = state.streakDays;
            document.getElementById('heroTotalWords').textContent = `${totalWords}+`;
            document.getElementById('heroCategories').textContent = Object.keys(categoriesData).length;
        }

        // Add XP
        function addXP(amount) {
            state.totalXP += amount;
            const level = Math.floor(state.totalXP / 1000) + 1;
            
            if (level > state.userLevel) {
                state.userLevel = level;
                showLevelUpAnimation();
            }
            
            updateStats();
        }

        // Level up animation
        function showLevelUpAnimation() {
            createConfetti(50);
            setTimeout(() => {
                alert(` Level Up! You've reached Level ${state.userLevel}!`);
            }, 500);
        }

        // Create confetti
        function createConfetti(count = 20) {
            const container = document.getElementById('confetti-container');
            container.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
                confetti.style.animationDuration = `${2 + Math.random() * 3}s`;
                confetti.style.animationDelay = `${Math.random() * 1}s`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                container.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Handle add category form
        function handleAddCategory(e) {
            e.preventDefault();
            
            const name = document.getElementById('categoryName').value.trim();
            const icon = document.getElementById('categoryIcon').value.trim();
            const color = document.getElementById('categoryColor').value;
            
            if (name && icon) {
                const key = name.toLowerCase().replace(/\s+/g, '_');
                
                if (!categoriesData[key]) {
                    categoriesData[key] = {
                        name: name,
                        icon: icon,
                        color: color,
                        description: `Vocabulary for ${name}`,
                        words: []
                    };
                    
                    renderCategories();
                    closeAddCategoryModal();
                    addXP(100);
                    createConfetti(30);
                    setTimeout(() => {
                        alert(` New category "${name}" created successfully!`);
                    }, 300);
                } else {
                    alert('Category already exists!');
                }
            }
        }

        // Handle add word form
        function handleAddWord(e) {
            e.preventDefault();
            
            if (!state.currentCategory) {
                alert('Please select a category first!');
                return;
            }
            
            const en = document.getElementById('wordEnglish').value.trim();
            const ar = document.getElementById('wordArabic').value.trim();
            const pronunciation = document.getElementById('wordPronunciation').value.trim();
            const difficulty = document.getElementById('wordDifficulty').value;
            const example = document.getElementById('wordExample').value.trim() || `Example sentence for "${en}".`;
            
            if (en && ar && pronunciation) {
                categoriesData[state.currentCategory].words.push({
                    en: en,
                    ar: ar,
                    pronunciation: pronunciation,
                    difficulty: difficulty,
                    mastered: false,
                    learningStage: 'new',
                    correctAnswers: 0,
                    totalAttempts: 0,
                    example: example
                });
                
                renderWords();
                updateStats();
                closeAddWordModal();
                addXP(40);
                createConfetti(25);
                setTimeout(() => {
                    alert(` Word "${en}" added successfully!`);
                }, 300);
            }
        }

        // Modal functions
        function openAddCategoryModal() {
            document.getElementById('addCategoryModal').classList.add('active');
        }
        
        function closeAddCategoryModal() {
            document.getElementById('addCategoryModal').classList.remove('active');
            document.getElementById('addCategoryForm').reset();
        }
        
        function openAddWordModal() {
            if (!state.currentCategory) {
                alert('Please select a category first!');
                return;
            }
            document.getElementById('addWordModal').classList.add('active');
        }
        
        function closeAddWordModal() {
            document.getElementById('addWordModal').classList.remove('active');
            document.getElementById('addWordForm').reset();
        }

        // Quiz functionality
        function startQuizMode() {
            // Generate quiz questions
            state.quiz.questions = generateQuizQuestions();
            state.quiz.currentQuestion = 0;
            state.quiz.score = 0;
            state.quiz.active = true;
            
            // Show quiz section
            document.getElementById('quizSection').style.display = 'block';
            document.getElementById('wordsSection').style.display = 'none';
            document.getElementById('categories').style.display = 'none';
            
            // Render first question
            renderQuizQuestion();
            
            // Scroll to quiz
            document.getElementById('quizSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function startCategoryQuiz() {
            if (!state.currentCategory) return;
            
            // Generate quiz questions from current category
            state.quiz.questions = generateQuizQuestions(state.currentCategory);
            state.quiz.currentQuestion = 0;
            state.quiz.score = 0;
            state.quiz.active = true;
            
            // Show quiz section
            document.getElementById('quizSection').style.display = 'block';
            
            // Render first question
            renderQuizQuestion();
            
            // Scroll to quiz
            document.getElementById('quizSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function generateQuizQuestions(categoryKey = null) {
            const questions = [];
            const allWords = [];
            
            if (categoryKey) {
                // Get words from specific category
                allWords.push(...categoriesData[categoryKey].words);
            } else {
                // Get words from all categories
                Object.values(categoriesData).forEach(category => {
                    allWords.push(...category.words);
                });
            }
            
            // Shuffle array
            const shuffled = [...allWords].sort(() => 0.5 - Math.random());
            
            // Select up to 10 words
            const selectedWords = shuffled.slice(0, 10);
            
            // Create questions
            selectedWords.forEach(word => {
                // Question type 1: Pronunciation match
                questions.push({
                    type: 'pronunciation',
                    word: word.en,
                    pronunciation: word.pronunciation,
                    options: generatePronunciationOptions(word.pronunciation),
                    correctAnswer: word.pronunciation,
                    difficulty: word.difficulty
                });
                
                // Question type 2: Translation match
                questions.push({
                    type: 'translation',
                    word: word.en,
                    arabic: word.ar,
                    options: generateTranslationOptions(word.ar, categoryKey),
                    correctAnswer: word.ar,
                    difficulty: word.difficulty
                });
            });
            
            // Shuffle questions and take first 10
            return [...questions].sort(() => 0.5 - Math.random()).slice(0, 10);
        }
        
        function generatePronunciationOptions(correct) {
            const options = [correct];
            const wrongOptions = [
                correct.replace(/i/g, '').replace(//g, ''),
                correct.replace(//g, 's').replace(//g, 'z'),
                correct.replace(//g, 's').replace(/t/g, ''),
                correct.replace(/d/g, 'j').replace(//g, 'n')
            ];
            
            while (options.length < 4 && wrongOptions.length > 0) {
                const randomIndex = Math.floor(Math.random() * wrongOptions.length);
                const option = wrongOptions.splice(randomIndex, 1)[0];
                if (option && !options.includes(option)) {
                    options.push(option);
                }
            }
            
            // Shuffle options
            return options.sort(() => 0.5 - Math.random());
        }
        
        function generateTranslationOptions(correct, categoryKey) {
            const options = [correct];
            const allWords = categoryKey ? 
                categoriesData[categoryKey].words : 
                Object.values(categoriesData).flatMap(c => c.words);
            
            // Get random wrong answers
            const wrongAnswers = [...allWords]
                .filter(w => w.ar !== correct)
                .sort(() => 0.5 - Math.random())
                .slice(0, 3)
                .map(w => w.ar);
            
            options.push(...wrongAnswers);
            
            // Shuffle options
            return options.sort(() => 0.5 - Math.random());
        }
        
        function renderQuizQuestion() {
            if (!state.quiz.active || state.quiz.currentQuestion >= state.quiz.questions.length) {
                showQuizResults();
                return;
            }
            
            const question = state.quiz.questions[state.quiz.currentQuestion];
            const questionEl = document.getElementById('quizQuestion');
            const optionsEl = document.getElementById('quizOptions');
            const feedbackEl = document.getElementById('quizFeedback');
            const submitBtn = document.getElementById('quizSubmitBtn');
            const nextBtn = document.getElementById('quizNextBtn');
            const skipBtn = document.getElementById('quizSkipBtn');
            
            // Reset UI
            feedbackEl.style.display = 'none';
            feedbackEl.className = 'quiz-feedback';
            optionsEl.innerHTML = '';
            submitBtn.style.display = 'block';
            nextBtn.style.display = 'none';
            
            // Set question text
            if (question.type === 'pronunciation') {
                questionEl.innerHTML = `What is the correct British pronunciation of:<br><span style="font-family: var(--font-display); font-size: var(--text-4xl); color: var(--primary-600);">${question.word}</span>`;
            } else {
                questionEl.innerHTML = `What is the Arabic translation of:<br><span style="font-family: var(--font-display); font-size: var(--text-4xl); color: var(--primary-600);">${question.word}</span>`;
            }
            
            // Render options
            question.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option';
                optionEl.textContent = option;
                optionEl.dataset.index = index;
                optionEl.addEventListener('click', () => selectOption(optionEl, index));
                optionsEl.appendChild(optionEl);
            });
            
            // Update progress
            document.getElementById('currentQuestion').textContent = state.quiz.currentQuestion + 1;
            document.getElementById('totalQuestions').textContent = state.quiz.questions.length;
            document.getElementById('quizScore').textContent = `Score: ${state.quiz.score}`;
            document.getElementById('quizProgressBar').style.width = `${((state.quiz.currentQuestion) / state.quiz.questions.length) * 100}%`;
        }
        
        function selectOption(element, index) {
            // Remove selected class from all options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            element.classList.add('selected');
            element.dataset.selected = index;
        }
        
        function submitAnswer() {
            const selectedOption = document.querySelector('.quiz-option.selected');
            const feedbackEl = document.getElementById('quizFeedback');
            const submitBtn = document.getElementById('quizSubmitBtn');
            const nextBtn = document.getElementById('quizNextBtn');
            
            if (!selectedOption) {
                alert('Please select an answer!');
                return;
            }
            
            const question = state.quiz.questions[state.quiz.currentQuestion];
            const selectedIndex = parseInt(selectedOption.dataset.selected);
            const selectedAnswer = question.options[selectedIndex];
            const isCorrect = selectedAnswer === question.correctAnswer;
            
            // Show feedback
            feedbackEl.style.display = 'block';
            feedbackEl.textContent = isCorrect ? 
                `Correct! ${question.type === 'pronunciation' ? 'Pronunciation' : 'Translation'}: ${question.correctAnswer}` :
                `Incorrect. The correct ${question.type === 'pronunciation' ? 'pronunciation' : 'translation'} is: ${question.correctAnswer}`;
            
            feedbackEl.className = `quiz-feedback ${isCorrect ? 'feedback-correct' : 'feedback-incorrect'}`;
            
            // Update score
            if (isCorrect) {
                const points = question.difficulty === 'easy' ? 10 : question.difficulty === 'medium' ? 15 : 20;
                state.quiz.score += points;
                addXP(points / 2);
            }
            
            // Disable options and change their appearance
            document.querySelectorAll('.quiz-option').forEach((opt, index) => {
                opt.style.cursor = 'default';
                if (index == selectedIndex && !isCorrect) {
                    opt.classList.add('incorrect');
                }
                if (question.options[index] === question.correctAnswer) {
                    opt.classList.add('correct');
                }
            });
            
            // Show next button
            submitBtn.style.display = 'none';
            nextBtn.style.display = 'block';
        }
        
        function nextQuestion() {
            state.quiz.currentQuestion++;
            renderQuizQuestion();
        }
        
        function skipQuestion() {
            state.quiz.currentQuestion++;
            renderQuizQuestion();
        }
        
        function showQuizResults() {
            const scorePercent = Math.round((state.quiz.score / (state.quiz.questions.length * 20)) * 100);
            
            document.getElementById('resultScore').textContent = `${scorePercent}%`;
            document.getElementById('resultMessage').textContent = 
                scorePercent >= 90 ? 'Perfect Score!' :
                scorePercent >= 80 ? 'Excellent Work!' :
                scorePercent >= 70 ? 'Great Job!' :
                scorePercent >= 60 ? 'Good Effort!' : 'Keep Practicing!';
            
            // Show result section
            document.querySelector('.quiz-content').style.display = 'none';
            document.getElementById('quizResult').style.display = 'block';
            
            // Add XP for completing quiz
            addXP(100 + state.quiz.score);
            createConfetti(40);
        }
        
        function resetQuiz() {
            document.querySelector('.quiz-content').style.display = 'block';
            document.getElementById('quizResult').style.display = 'none';
            startQuizMode();
        }
        
        function closeQuiz() {
            document.getElementById('quizSection').style.display = 'none';
            document.getElementById('categories').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Simulate progress for demo
        function simulateProgress() {
            // Mark some words as mastered
            Object.values(categoriesData).forEach(category => {
                category.words.slice(0, 2).forEach(word => {
                    word.mastered = true;
                    word.learningStage = 'mastered';
                });
            });
            
            // Update state
            state.masteredWords = 20;
            state.learningWords = 15;
            state.newWords = 35;
            state.totalXP = 1250;
            state.userLevel = 2;
            
            // Update UI
            updateStats();
            renderCategories();
        }

        // Save progress to localStorage
        function saveProgress() {
            localStorage.setItem('englishMasterProgress', JSON.stringify({
                categories: categoriesData,
                state: {
                    userLevel: state.userLevel,
                    totalXP: state.totalXP,
                    streakDays: state.streakDays,
                    masteredWords: state.masteredWords,
                    learningWords: state.learningWords,
                    newWords: state.newWords
                }
            }));
        }

        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('englishMasterProgress');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    // Merge saved data with current state
                    if (data.categories) {
                        Object.assign(categoriesData, data.categories);
                    }
                    if (data.state) {
                        Object.assign(state, data.state);
                    }
                    updateStats();
                    renderCategories();
                } catch (e) {
                    console.error('Error loading progress:', e);
                }
            }
        }

        // Close modals when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        // Keyboard accessibility
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
            }
        });

        // Load voices for speech synthesis
        if ('speechSynthesis' in window) {
            speechSynthesis.onvoiceschanged = () => {
                speechSynthesis.getVoices();
            };
            // Initial load
            speechSynthesis.getVoices();
        }
    </script>
</body>
    </html>
