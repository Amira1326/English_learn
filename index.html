<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VocabMaster Pro üá¨üáß</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --success: #00b894;
            --danger: #ff7675;
            --bg: #f0f2f5;
            --card: #ffffff;
            --text: #2d3436;
            --accent: #fdcb6e;
        }
        .dark {
            --bg: #1a1a2e;
            --card: #16213e;
            --text: #f8f9fa;
            --primary: #74b9ff;
        }

        * { box-sizing: border-box; transition: 0.3s; }
        body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }

        header { background: var(--card); padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 15px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .logo { font-weight: 900; font-size: 1.6rem; color: var(--primary); letter-spacing: -1px; }

        .container { max-width: 1000px; margin: auto; padding: 20px; }

        /* Tabs Navigation */
        .nav-wrapper { overflow-x: auto; white-space: nowrap; margin-bottom: 25px; padding: 5px; }
        .tabs { display: flex; gap: 8px; }
        .tab-btn { padding: 12px 20px; background: var(--card); border-radius: 15px; cursor: pointer; border: 2px solid transparent; font-weight: 600; font-size: 0.9rem; }
        .tab-btn.active { border-color: var(--primary); color: var(--primary); box-shadow: 0 5px 15px rgba(108, 92, 231, 0.2); }

        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card { background: var(--card); padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-bottom: 25px; }
        
        /* Learning Log Form */
        .log-form { display: grid; grid-template-columns: 1fr 2fr auto; gap: 10px; margin-bottom: 20px; }
        @media (max-width: 600px) { .log-form { grid-template-columns: 1fr; } }

        input, select, textarea { padding: 12px; border-radius: 12px; border: 1px solid #ddd; background: var(--bg); color: var(--text); font-size: 1rem; width: 100%; }
        .btn { border: none; padding: 12px 25px; border-radius: 12px; font-weight: bold; cursor: pointer; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
        .btn-delete { background: var(--danger); padding: 5px 10px; font-size: 0.8rem; }

        /* Flashcards & Quiz */
        .flip-container { width: 100%; max-width: 350px; height: 220px; margin: 25px auto; perspective: 1000px; }
        .flipper { position: relative; width: 100%; height: 100%; transition: 0.6s; transform-style: preserve-3d; }
        .flipper.flipped { transform: rotateY(180deg); }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 25px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 25px; font-size: 1.8rem; font-weight: bold; color: white; text-align: center; }
        .front { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
        .back { background: var(--success); transform: rotateY(180deg); }

        /* Table Design */
        .scroll-x { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; padding: 15px; background: rgba(0,0,0,0.02); font-size: 0.8rem; text-transform: uppercase; color: #888; }
        td { padding: 15px; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .date-badge { font-size: 0.8rem; color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div class="logo">VocabMaster üá¨üáß</div>
    <div style="display:flex; gap:12px">
        <button onclick="exportData()" class="btn" style="padding:8px">üíæ</button>
        <button onclick="document.body.classList.toggle('dark')" class="btn" style="padding:8px; background:var(--secondary)">üåì</button>
    </div>
</header>

<div class="container">
    <div class="nav-wrapper">
        <div class="tabs">
            <div class="tab-btn active" onclick="showTab(event, 'learn')">üìñ Vocabulary</div>
            <div class="tab-btn" onclick="showTab(event, 'easy')">üòä Easy English</div>
            <div class="tab-btn" onclick="showTab(event, 'tv')">üì∫ TV Series</div>
            <div class="tab-btn" onclick="showTab(event, 'lucy')">üë© Lucy English</div>
            <div class="tab-btn" onclick="showTab(event, 'manage')">‚ûï Add Word</div>
        </div>
    </div>

    <div id="learn" class="section active">
        <div class="card" style="text-align: center;">
            <h3>Flashcards</h3>
            <div class="flip-container" onclick="document.getElementById('flipper').classList.toggle('flipped')">
                <div class="flipper" id="flipper">
                    <div class="front" id="flash-front">Empty</div>
                    <div class="back" id="flash-back">Add words to start</div>
                </div>
            </div>
            <div style="display:flex; gap:10px; justify-content:center">
                <button class="btn" style="background:#eee; color:#333" onclick="prevCard()">‚¨ÖÔ∏è</button>
                <button class="btn" onclick="speakFlash()">üîä Listen</button>
                <button class="btn" onclick="nextCard()">‚û°Ô∏è</button>
            </div>
        </div>
    </div>

    <div id="easy" class="section">
        <div class="card">
            <h3>üòä Easy English Journal</h3>
            <div class="log-form">
                <input type="date" id="date-easy">
                <input type="text" id="note-easy" placeholder="What did you learn from Easy English?">
                <button class="btn" onclick="addLog('easy')">Add Log</button>
            </div>
            <div class="scroll-x">
                <table>
                    <thead><tr><th>Date</th><th>Lesson Details</th><th>Action</th></tr></thead>
                    <tbody id="log-easy"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="tv" class="section">
        <div class="card">
            <h3>üì∫ TV Series Journal</h3>
            <div class="log-form">
                <input type="date" id="date-tv">
                <input type="text" id="note-tv" placeholder="Which series? New phrases?">
                <button class="btn" onclick="addLog('tv')">Add Log</button>
            </div>
            <div class="scroll-x">
                <table>
                    <thead><tr><th>Date</th><th>Lesson Details</th><th>Action</th></tr></thead>
                    <tbody id="log-tv"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="lucy" class="section">
        <div class="card">
            <h3>üë© English with Lucy Journal</h3>
            <div class="log-form">
                <input type="date" id="date-lucy">
                <input type="text" id="note-lucy" placeholder="British pronunciation / Idioms...">
                <button class="btn" onclick="addLog('lucy')">Add Log</button>
            </div>
            <div class="scroll-x">
                <table>
                    <thead><tr><th>Date</th><th>Lesson Details</th><th>Action</th></tr></thead>
                    <tbody id="log-lucy"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="manage" class="section">
        <div class="card">
            <h3>‚ûï Add New Vocabulary</h3>
            <div style="display:grid; gap:15px">
                <input id="wIn" placeholder="English Word">
                <input id="mIn" placeholder="Meaning">
                <select id="cIn"></select>
                <button class="btn" onclick="saveWord()">Save Word</button>
            </div>
        </div>
    </div>
</div>

<script>
// Combined Data Object
let appData = JSON.parse(localStorage.getItem('vocabProData')) || {
    words: [],
    categories: ['General', 'Travel', 'Slang'],
    logs: {
        easy: [],
        tv: [],
        lucy: []
    }
};

let curIdx = 0;

function save() {
    localStorage.setItem('vocabProData', JSON.stringify(appData));
    render();
}

function showTab(event, tabId) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    event.currentTarget.classList.add('active');
}

// --- Vocabulary Logic ---
function saveWord() {
    const w = document.getElementById('wIn').value.trim();
    const m = document.getElementById('mIn').value.trim();
    const c = document.getElementById('cIn').value;
    if(!w || !m) return alert("Fill all fields");
    appData.words.unshift({ id: Date.now(), w, m, c });
    document.getElementById('wIn').value = ''; 
    document.getElementById('mIn').value = '';
    save();
}

// --- Learning Logs Logic ---
function addLog(type) {
    const date = document.getElementById(`date-${type}`).value;
    const note = document.getElementById(`note-${type}`).value.trim();
    if(!date || !note) return alert("Please enter date and lesson info");
    
    appData.logs[type].unshift({ id: Date.now(), date, note });
    document.getElementById(`note-${type}`).value = '';
    save();
}

function deleteLog(type, id) {
    appData.logs[type] = appData.logs[type].filter(l => l.id !== id);
    save();
}

// --- Flashcards ---
function updateFlashcard() {
    if(appData.words.length === 0) return;
    document.getElementById('flipper').classList.remove('flipped');
    document.getElementById('flash-front').innerText = appData.words[curIdx].w;
    document.getElementById('flash-back').innerText = appData.words[curIdx].m;
}

function nextCard() {
    if(appData.words.length === 0) return;
    curIdx = (curIdx + 1) % appData.words.length;
    updateFlashcard();
}

function prevCard() {
    if(appData.words.length === 0) return;
    curIdx = (curIdx - 1 + appData.words.length) % appData.words.length;
    updateFlashcard();
}

function speakFlash() {
    const txt = appData.words[curIdx]?.w;
    if(!txt) return;
    const msg = new SpeechSynthesisUtterance(txt);
    msg.lang = 'en-GB';
    window.speechSynthesis.speak(msg);
}

// --- Render Tables ---
function render() {
    // Categories Dropdown
    const cIn = document.getElementById('cIn');
    cIn.innerHTML = appData.categories.map(c => `<option value="${c}">${c}</option>`).join('');

    // Logs for each section
    ['easy', 'tv', 'lucy'].forEach(type => {
        const tbody = document.getElementById(`log-${type}`);
        tbody.innerHTML = appData.logs[type].map(log => `
            <tr>
                <td class="date-badge">${log.date}</td>
                <td>${log.note}</td>
                <td><button class="btn btn-delete" onclick="deleteLog('${type}', ${log.id})">üóëÔ∏è</button></td>
            </tr>
        `).join('');
    });

    updateFlashcard();
}

function exportData() {
    const blob = new Blob([JSON.stringify(appData)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = `my_learning_progress_${new Date().toLocaleDateString()}.json`;
    a.click();
}

// Initialize
render();
// Set default date to today for all date inputs
document.querySelectorAll('input[type="date"]').forEach(input => {
    input.value = new Date().toISOString().split('T')[0];
});
</script>

</body>
</html>
