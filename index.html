<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VocabMaster Elite üá¨üáß</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --bg: #f8fafc;
            --card: #ffffff;
            --text-main: #1e293b;
            --text-sub: #64748b;
            --success: #10b981;
            --danger: #ef4444;
            --accent: #f59e0b;
            --radius: 20px;
        }

        .dark {
            --bg: #0f172a;
            --card: #1e293b;
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
        }

        * {
            box-sizing: border-box;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        body {
            margin: 0;
            background: var(--bg);
            color: var(--text-main);
            padding-bottom: 80px; /* ŸÑÿ™ÿ±ŸÉ ŸÖÿ≥ÿßÿ≠ÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ≥ŸÅŸÑŸäÿ© ŸÅŸä ÿßŸÑÿ¨ŸàÿßŸÑ */
        }

        /* Header Decor */
        .header-bg {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            height: 160px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: -1;
            border-radius: 0 0 40px 40px;
        }

        header {
            padding: 30px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 900px;
            margin: auto;
        }

        .logo { font-weight: 800; font-size: 1.6rem; color: white; letter-spacing: -1px; }

        .container { max-width: 600px; margin: auto; padding: 0 20px; }

        /* Main Tabs Navigation (Floating Bottom on Mobile) */
        .tabs-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card);
            padding: 8px;
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            display: flex;
            gap: 5px;
            z-index: 2000;
            border: 1px solid rgba(255,255,255,0.1);
            width: 90%;
            max-width: 500px;
            justify-content: space-around;
        }

        .tab-btn {
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-weight: 600;
            color: var(--text-sub);
            font-size: 0.85rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .tab-btn i { font-size: 1.2rem; }
        .tab-btn.active { color: var(--primary); background: #f0f1ff; }

        .section { display: none; animation: slideUp 0.5s ease; margin-top: 20px; }
        .section.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Fancy Cards */
        .card {
            background: var(--card);
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            margin-bottom: 20px;
            border: 1px solid rgba(0,0,0,0.02);
        }

        .card h3 { margin-top: 0; font-weight: 800; font-size: 1.2rem; color: var(--text-main); }

        /* Flashcards 2.0 */
        .flip-container {
            width: 100%;
            height: 280px;
            perspective: 1000px;
            margin: 20px 0;
        }

        .flipper {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flipper.flipped { transform: rotateY(180deg); }

        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
        }

        .front {
            background: var(--card);
            color: var(--text-main);
            border: 2px solid var(--primary);
        }

        .back {
            background: var(--primary);
            color: white;
            transform: rotateY(180deg);
        }

        .word-text { font-size: 2.2rem; font-weight: 800; margin: 10px 0; }
        .meaning-text { font-size: 1.8rem; font-weight: 600; }

        /* Inputs & Buttons */
        input, select {
            width: 100%;
            padding: 14px;
            margin-bottom: 12px;
            border-radius: 15px;
            border: 1.5px solid #e2e8f0;
            background: var(--bg);
            color: var(--text-main);
            font-size: 1rem;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn:active { transform: scale(0.98); }

        .btn-ghost {
            background: transparent;
            color: var(--primary);
            box-shadow: none;
            border: 1.5px solid var(--primary);
        }

        /* Log List Style */
        .log-item {
            padding: 15px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .log-date { font-weight: 800; color: var(--primary); font-size: 0.8rem; margin-bottom: 4px; display: block; }
        .log-note { color: var(--text-main); font-weight: 600; }

        .badge {
            background: #f0f1ff;
            color: var(--primary);
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 800;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

<div class="header-bg"></div>

<header>
    <div class="logo">VocabMaster</div>
    <div style="display:flex; gap:10px">
        <button onclick="document.body.classList.toggle('dark')" style="background:rgba(255,255,255,0.2); border:none; color:white; padding:8px 12px; border-radius:12px; cursor:pointer">üåì</button>
    </div>
</header>

<div class="container">
    <div id="learn" class="section active">
        <div class="card" style="text-align: center;">
            <div id="progress-text" style="font-size: 0.8rem; font-weight: 800; color: var(--text-sub); margin-bottom: 10px;">READY TO LEARN?</div>
            <div class="flip-container" onclick="document.getElementById('flipper').classList.toggle('flipped')">
                <div class="flipper" id="flipper">
                    <div class="front">
                        <span class="badge" id="flash-cat">Category</span>
                        <div class="word-text" id="flash-front">English Word</div>
                        <small style="color:var(--text-sub)">Tap to flip</small>
                    </div>
                    <div class="back">
                        <div class="meaning-text" id="flash-back">ÿßŸÑŸÖÿπŸÜŸâ</div>
                        <small style="opacity:0.8">Tap to flip back</small>
                    </div>
                </div>
            </div>
            <div style="display:flex; gap:12px">
                <button class="btn btn-ghost" onclick="prevCard()" style="flex:1">‚¨ÖÔ∏è</button>
                <button class="btn" onclick="speakFlash()" style="flex:2">üîä Listen</button>
                <button class="btn btn-ghost" onclick="nextCard()" style="flex:1">‚û°Ô∏è</button>
            </div>
        </div>
    </div>

    <div id="journal" class="section">
        <div class="card">
            <h3>üìÖ Learning Logs</h3>
            <select id="log-selector" onchange="updateLogView()">
                <option value="easy">üòä Easy English</option>
                <option value="tv">üì∫ Learn with TV Series</option>
                <option value="lucy">üë© English with Lucy</option>
            </select>
            <div style="margin: 20px 0;">
                <input type="date" id="log-date">
                <textarea id="log-note" placeholder="What did you learn today?" style="width:100%; border-radius:15px; padding:15px; border:1.5px solid #e2e8f0; margin-bottom:10px; min-height:80px;"></textarea>
                <button class="btn" onclick="addNewLog()">Add to Journal</button>
            </div>
            <div id="log-display" style="max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>

    <div id="dictionary" class="section">
        <div class="card">
            <h3>üìö My Dictionary</h3>
            <input type="text" id="searchBox" placeholder="Search your words..." oninput="renderDict()">
            <div id="dict-list" style="margin-top:15px"></div>
        </div>
    </div>

    <div id="manage" class="section">
        <div class="card">
            <h3>üìÇ Categories</h3>
            <div style="display:flex; gap:8px">
                <input type="text" id="newCatName" placeholder="New category name...">
                <button class="btn" onclick="addCat()" style="width:auto; padding:0 20px">+</button>
            </div>
            <div id="cat-tags" style="display:flex; flex-wrap:wrap; gap:8px; margin-top:10px"></div>
        </div>
        <div class="card">
            <h3>‚ûï Add New Word</h3>
            <input id="wIn" placeholder="English Word">
            <input id="mIn" placeholder="Meaning / Arabic">
            <select id="cInSelect"></select>
            <button class="btn" onclick="saveWord()">Save Word</button>
            <button class="btn btn-ghost" onclick="exportData()" style="margin-top:10px">üíæ Export Data</button>
        </div>
    </div>
</div>

<div class="tabs-container">
    <button class="tab-btn active" onclick="showTab(event, 'learn')">üìñ <span>Learn</span></button>
    <button class="tab-btn" onclick="showTab(event, 'journal')">üìù <span>Journal</span></button>
    <button class="tab-btn" onclick="showTab(event, 'dictionary')">üìö <span>Words</span></button>
    <button class="tab-btn" onclick="showTab(event, 'manage')">‚öôÔ∏è <span>Manage</span></button>
</div>

<script>
let data = JSON.parse(localStorage.getItem('vocabMasterElite')) || {
    words: [],
    categories: ['General', 'Airport', 'Clothes'],
    logs: { easy: [], tv: [], lucy: [] }
};

let curIdx = 0;

function save() {
    localStorage.setItem('vocabMasterElite', JSON.stringify(data));
    renderAll();
}

function showTab(event, tabId) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    event.currentTarget.classList.add('active');
}

// --- Logic ---
function saveWord() {
    const w = wIn.value.trim(), m = mIn.value.trim(), c = cInSelect.value;
    if(!w || !m) return;
    data.words.unshift({ id: Date.now(), w, m, c });
    wIn.value = ''; mIn.value = '';
    save();
}

function addCat() {
    const name = newCatName.value.trim();
    if(name && !data.categories.includes(name)) {
        data.categories.push(name);
        newCatName.value = '';
        save();
    }
}

function addNewLog() {
    const type = document.getElementById('log-selector').value;
    const date = document.getElementById('log-date').value;
    const note = document.getElementById('log-note').value.trim();
    if(!date || !note) return alert("Fill date and note!");
    data.logs[type].unshift({ id: Date.now(), date, note });
    document.getElementById('log-note').value = '';
    save();
}

// --- Renderers ---
function renderAll() {
    // Categories
    cInSelect.innerHTML = data.categories.map(c => `<option value="${c}">${c}</option>`).join('');
    document.getElementById('cat-tags').innerHTML = data.categories.map(c => `<span class="badge">${c}</span>`).join('');
    
    // Dictionary
    renderDict();
    
    // Logs
    updateLogView();

    // Flashcard
    updateFlashcard();
}

function renderDict() {
    const search = searchBox.value.toLowerCase();
    const filtered = data.words.filter(w => w.w.toLowerCase().includes(search));
    document.getElementById('dict-list').innerHTML = filtered.map(w => `
        <div class="log-item">
            <div>
                <span class="badge">${w.c}</span>
                <div style="font-weight:800; font-size:1.1rem">${w.w}</div>
                <div style="color:var(--text-sub)">${w.m}</div>
            </div>
            <button onclick="deleteWord(${w.id})" style="background:none; border:none; color:var(--danger); cursor:pointer">üóëÔ∏è</button>
        </div>
    `).join('');
}

function updateLogView() {
    const type = document.getElementById('log-selector').value;
    document.getElementById('log-display').innerHTML = data.logs[type].map(l => `
        <div class="log-item">
            <div>
                <span class="log-date">${l.date}</span>
                <div class="log-note">${l.note}</div>
            </div>
            <button onclick="deleteLog('${type}', ${l.id})" style="background:none; border:none; color:var(--danger); cursor:pointer">üóëÔ∏è</button>
        </div>
    `).join('');
}

function updateFlashcard() {
    if(data.words.length === 0) return;
    const w = data.words[curIdx];
    document.getElementById('flash-cat').innerText = w.c;
    document.getElementById('flash-front').innerText = w.w;
    document.getElementById('flash-back').innerText = w.m;
    document.getElementById('progress-text').innerText = `WORD ${curIdx + 1} OF ${data.words.length}`;
}

function nextCard() { curIdx = (curIdx + 1) % data.words.length; updateFlashcard(); }
function prevCard() { curIdx = (curIdx - 1 + data.words.length) % data.words.length; updateFlashcard(); }

function deleteWord(id) { data.words = data.words.filter(w => w.id !== id); save(); }
function deleteLog(type, id) { data.logs[type] = data.logs[type].filter(l => l.id !== id); save(); }

function speakFlash() {
    const msg = new SpeechSynthesisUtterance(data.words[curIdx].w);
    msg.lang = 'en-GB';
    window.speechSynthesis.speak(msg);
}

function exportData() {
    const blob = new Blob([JSON.stringify(data)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'MyVocabElite.json';
    a.click();
}

// Init
document.getElementById('log-date').value = new Date().toISOString().split('T')[0];
renderAll();
</script>
</body>
</html>
